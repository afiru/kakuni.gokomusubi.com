"use strict";(globalThis.webpackChunksimplybook_app=globalThis.webpackChunksimplybook_app||[]).push([[167],{8800:(e,t,r)=>{r.d(t,{f:()=>a});var n,i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}),a=function(e){function t(r,n){for(var i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var o=e.apply(this,function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}([r],i,!1))||this;return o.name="DataError",o.fields=n,Error.captureStackTrace&&Error.captureStackTrace(o,t),o}return i(t,e),t}(Error)},4576:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(9592),i=r(7723),a=r(8800),o=function(){return o=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},o.apply(this,arguments)},s=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},l=function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const c=function(){function e(e){this.route=null,this.getMethodHeaders={"X-WP-NONCE":n.X2},this.postMethodHeaders={"Content-Type":"application/json",Accept:"application/json","X-WP-NONCE":n.X2},this.payload={nonce:n.au},e&&(this.route=n.V_+e)}return e.prototype.get=function(){return s(this,void 0,void 0,(function(){var e,t;return l(this,(function(r){switch(r.label){case 0:if(!this.route)throw new Error((0,i.__)("Route is not set","simplybook"));return[4,fetch(this.route,{method:"GET",headers:this.getMethodHeaders})];case 1:return(e=r.sent()).ok?[3,3]:[4,e.json()];case 2:return t=r.sent(),[2,this.handleError(t)];case 3:return[2,e.json()]}}))}))},e.prototype.post=function(e){return s(this,void 0,void 0,(function(){var t,r;return l(this,(function(a){switch(a.label){case 0:if(!this.route)throw new Error((0,i.__)("Route is not set","simplybook"));return this.payload.payloadWasSet||this.setPayload(e),[4,fetch(this.route,{method:"POST",headers:this.postMethodHeaders,body:JSON.stringify(o(o({},this.payload),{nonce:n.au}))})];case 1:return t=a.sent(),this.resetPayload(),t.ok?[3,3]:[4,t.json()];case 2:return r=a.sent(),[2,this.handleError(r)];case 3:return[2,t.json()]}}))}))},e.prototype.put=function(e){return s(this,void 0,void 0,(function(){var t,r,n;return l(this,(function(a){switch(a.label){case 0:if(!this.route)throw new Error((0,i.__)("Route is not set. Use setRoute() before calling put()","simplybook"));return this.payload.payloadWasSet||this.setPayload(e),t=o(o({},this.payload),e&&o({},e)),[4,fetch(this.route,{method:"PUT",headers:this.postMethodHeaders,body:JSON.stringify(o({},t))})];case 1:return r=a.sent(),this.resetPayload(),r.ok?[3,3]:[4,r.json()];case 2:return n=a.sent(),[2,this.handleError(n)];case 3:return[2,r.json()]}}))}))},e.prototype.delete=function(){return s(this,void 0,void 0,(function(){var e,t,r;return l(this,(function(a){switch(a.label){case 0:if(!this.route)throw new Error((0,i.__)("Route is not set. Use setRoute() before calling delete()","simplybook"));return e={nonce:n.au},[4,fetch(this.route,{method:"DELETE",headers:this.postMethodHeaders,body:JSON.stringify(e)})];case 1:return(t=a.sent()).ok?[3,3]:[4,t.json()];case 2:return r=a.sent(),[2,this.handleError(r)];case 3:return[2,t.json()]}}))}))},e.prototype.setRoute=function(e){return this.route=n.V_+e,this},e.prototype.setHeaders=function(e,t){return"get"===t?(this.getMethodHeaders=o(o({},this.getMethodHeaders),e),this):"post"===t?(this.postMethodHeaders=o(o({},this.postMethodHeaders),e),this):this},e.prototype.setPayload=function(e){if(!1===this.isValidPayload(e))throw new Error((0,i.__)("Payload must be a non-empty object.","simplybook"));return this.payload=o(o(o({},this.payload),e),{payloadWasSet:!0}),this},e.prototype.isValidPayload=function(e){if(!e||"object"!=typeof e||Array.isArray(e))return!1;var t=Object.getPrototypeOf(e);return(t===Object.prototype||null===t)&&Object.keys(e).length>0},e.prototype.resetPayload=function(){this.payload={nonce:n.au}},e.prototype.handleError=function(e){var t,r=(0,i.__)("An unknown error occurred. Please try again.","simplybook");if("internal_server_error"===(null==e?void 0:e.code))throw new Error(r);throw"string"==typeof e&&(r=e),(null==e?void 0:e.message)&&(r=e.message),(null==e?void 0:e.error)&&(r=e.error),(null==e?void 0:e.errors)&&(t=e.errors),new a.f(r,t)},e}()},1888:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(790),i=r(4164),a=r(9681),o=r(1577),s=r(1314),l=function(e){var t=e.className,r=void 0===t?"":t,l=e.children,c=e.link,d=void 0===c?"":c,u=e.linkClassName,m=void 0===u?"":u,v=e.btnVariant,p=e.disabled,f=void 0!==p&&p,g=e.target,h=e.loginLink,y=void 0===h?"":h,b=(e.icon,e.iconName),x=void 0===b?"":b,_=e.iconSize,w=void 0===_?"":_,E=e.iconClass,k=void 0===E?"":E,N=e.iconStyle,S=e.onClick,j=e.reverseIcon,C=void 0!==j&&j,A=(0,s.A)().fetchLinkData,P=(0,i.A)("flex items-center justify-center rounded-full transition-all duration-200 px-3 py-1",{"bg-primary text-white hover:bg-primary-dark !p-4 text-base":"primary"==v,"bg-primary text-white hover:bg-primary-dark ":"primary-small"==v,"bg-secondary text-white hover:bg-secondary-dark !p-4 text-base":"secondary"==v,"bg-secondary text-white hover:bg-secondary-dark ":"secondary-small"==v,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary !p-4 text-base":"tertiary"==v,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary":"tertiary-small"==v,"border-2 border-black bg-transparent !p-4 text-base":"ghost"==v,"border-2 border-black bg-transparent":"ghost-small"==v,"bg-primary text-white rounded-md hover:bg-primary-dark !p-4 text-base":"square"==v,"rounded-md text-white":"square-small"==v,"border-2 border-primary text-primary rounded-md !p-4 text-base":"square-ghost"==v,"border-2 border-primary text-primary rounded-md":"square-ghost-small"==v}),O=f?"opacity-50 cursor-not-allowed pointer-events-none":"",T=C?"flex-row-reverse":"flex-row";return r.length>0&&(P=P+" "+r),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.N_,{className:(0,i.A)(m,"text-sm font-semibold",O),to:d,onClick:y?function(e){return function(e,t){e.preventDefault(),A().then((function(e){var r,n=null===(r=null==e?void 0:e.data)||void 0===r?void 0:r.simplybook_external_login_url;if(n){var i="".concat(n,"/").concat(t,"/");n.includes("by-hash")&&(i="".concat(n,"?back_url=/").concat(t,"/")),window.open(i,"_blank"),window.focus()}else console.error("No link found in response")})).catch((function(e){console.error("Error fetching login URL:",e)}))}(e,y)}:S,target:g,children:(0,n.jsxs)("div",{className:(0,i.A)(P,T,r),children:[x&&(0,n.jsx)(o.A,{className:(0,i.A)(k,{"mr-2":!C,"ml-2":C}),name:x,size:w,style:N}),l]})})})};l.displayName="ButtonLink";const c=l},4251:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),i=r(1409),a=r(1577);const o=function(){function e(e,t){this.type=t,this.message=e}return e.prototype.setType=function(e){return this.type=e,this},e.prototype.setMessage=function(e){return this.message=e,this},e.prototype.render=function(){"success"===this.type&&(0,i.oR)(this.createToast(this.message,"circle-check","green")),"error"===this.type&&(0,i.oR)(this.createToast(this.message,"circle-xmark","red")),"warning"===this.type&&(0,i.oR)(this.createToast(this.message,"warning","var(--color-warning)")),this.type||console.error("ToastNotice: No type has been defined, aborted."),this.cleanUp()},e.prototype.createToast=function(e,t,r){return e&&t&&r?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(a.A,{className:"h-5",name:t,color:r,size:"2x"}),(0,n.jsx)("p",{className:"text-black font-normal text-[0.85rem] m-0",children:e})]})}):(0,n.jsx)(n.Fragment,{})},e.prototype.cleanUp=function(){this.message="No notice message has been defined",this.type="warning"},e}()},5946:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),i=r(1577),a=r(7008);const o=function(e){var t=e.message,r=e.type,o=e.iconType,s=void 0===o?"":o,l=e.iconColor,c=void 0===l?"":l;if(!s||!c)switch(r){case"warning":s="warning-circle",c="var(--color-yellow-500)";break;case"error":s="warning-circle",c="var(--color-red-500)";break;default:s="info-circle",c="var(--color-black-900)"}return t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.A,{name:s,color:c,className:"tooltip-icon ml-2","data-tooltip-id":"field-tooltip","data-tooltip-content":t,"aria-hidden":"false","aria-label":t}),(0,n.jsx)(a.m_,{id:"field-tooltip",place:"bottom",openEvents:{mouseover:!0,focus:!0,click:!0}})]}):null}},7967:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(790),i=r(5920),a=r(1609);var o=r(5946),s=(0,a.memo)((function(e){var t=e.label,r=e.context,a=e.tooltip,s=e.reverseLabel,l=void 0!==s&&s,c=e.className,d=void 0===c?"":c,u=e.inputId,m=e.required,v=void 0!==m&&m,p=e.type,f=void 0===p?"text":p,g=e.children,h=e.fieldState,y=function(e){var t="pattern"==e.type,r="invalid-field";return"required"==e.type&&(r+="-required"),t&&(r+="-regex"),r},b=["flex flex-col",d,"mb-4",(null==h?void 0:h.error)?y(null==h?void 0:h.error):""].filter(Boolean).join(" "),x=["flex flex-col w-full",l?"flex-col-reverse":""].filter(Boolean).join(" ");return(0,n.jsxs)("div",{className:b,children:[(0,n.jsxs)("div",{className:x,children:["checkbox"===f&&g,t&&(0,n.jsxs)(i.b,{className:"cursor-pointer pb-1 font-medium text-black text-label ",htmlFor:u,children:[t,v,a&&(0,n.jsx)(o.A,{message:null==a?void 0:a.message,type:null==a?void 0:a.type})]}),"checkbox"!==f&&g]}),r&&(0,n.jsx)("p",{className:"mt-2 text-xs font-light text-gray-600",children:r})]})}));s.displayName="FieldWrapper";const l=s},8908:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(790),i=r(4164),a=function(e){var t=e.className,r=void 0===t?"":t,a=e.type,o=e.children,s=e.onClick,l=e.btnVariant,c=void 0===l?"primary":l,d=e.disabled,u=void 0!==d&&d,m=(0,i.$)("flex items-center justify-center rounded-full transition-all duration-200 px-3 py-1 text-sm",{"bg-primary text-white hover:bg-primary-dark !p-4 text-base":"primary"==c,"bg-primary text-white hover:bg-primary-dark ":"primary-small"==c,"bg-secondary text-white hover:bg-secondary-dark !p-4 text-base":"secondary"==c,"bg-secondary text-white hover:bg-secondary-dark ":"secondary-small"==c,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary !p-4 text-base":"tertiary"==c,"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary":"tertiary-small"==c,"border-2 border-black bg-transparent !p-4 text-base":"ghost"==c,"border-2 border-black bg-transparent":"ghost-small"==c,"border-2 border-inherit bg-primary text-white rounded-md text-base":"square"==c,"border-2 border-primary text-primary rounded-md text-base":"square-ghost"==c,"rounded-md text-white":"square-small"==c,"border-2 border-primary text-primary rounded-md":"square-ghost-small"==c,"opacity-50 cursor-not-allowed":u,"cursor-pointer":!u});return r.length>0&&(m=m+" "+r),(0,n.jsx)("button",{type:a,onClick:s,className:m,disabled:u,children:o})};a.displayName="ButtonInput";const o=a},359:(e,t,r)=>{r.d(t,{A:()=>c});var n=r(790),i=r(1609),a=r.n(i),o=r(4164),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e){var t=e.name,r=e.placeholder,i=e.type,l=e.className,c=e.clickToSelect,d=void 0!==c&&c,u=e.disabled,m=void 0!==u&&u,v=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["name","placeholder","type","className","clickToSelect","disabled"]),p=a().useState("Copy"),f=p[0],g=p[1],h=a().useState(!1),y=h[0],b=h[1],x=function(){var e=document.querySelector(".copy-button");document.querySelector(".copy-input"),"string"==typeof v.value&&navigator.clipboard.writeText(v.value).then((function(){if(!e)throw new Error("Button not found");g("Copied!"),b(!0),setTimeout((function(){g("Copy"),b(!1)}),1e3)})).catch((function(e){console.error("Error copying text: ",e)}))},_=m?"bg-gray-200 border-gray-200 text-black cursor-not-allowed":"";return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"w-full relative",children:[(0,n.jsx)("input",s({name:t,placeholder:r,type:i,onClick:d?x:void 0,className:(0,o.A)("input-base copy-input transition-[border-color] duration-300 ease-in-out "+_+" "+l),disabled:m},v)),d&&f&&(0,n.jsx)("button",{onClick:d?x:void 0,type:"button","aria-label":t,className:(0,o.A)(y?"bg-green-100 text-green-600":"bg-gray-50 text-gray-600","absolute cursor-pointer right-[0.5rem] top-5.5 transform -translate-y-1/2 rounded-md px-2 py-1 text-xs font-semibold copy-button"),children:f})]})})};l.displayName="TextInput";const c=l},9964:(e,t,r)=>{r.d(t,{V:()=>g,r:()=>f});var n=r(790),i=r(1609),a=r(8468),o=r.n(a),s=r(9866),l=r(8981),c=r(7723),d=r(4251),u=r(8800),m=function(){return m=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},m.apply(this,arguments)},v=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},p=(0,i.createContext)(null),f=function(){var e=(0,i.useContext)(p);if(!e)throw Error("useCrudContext can only be used by child components inside the CrudContextProvider");return e},g=function(e){var t=e.children,r=(0,i.useReducer)(h,x),a=r[0],o=r[1],v=(0,l.A)(),f=v.getServices,g=v.createService,y=v.updateService,_=v.deleteService,w=v.isLoading,E=(0,s.A)(),k=E.getProviders,N=E.createProvider,S=E.updateProvider,j=E.deleteProvider,C=E.isLoading,A=new d.A;return(0,i.useEffect)((function(){o({dispatchType:"loadingChanged",change:{isLoading:C||w}})}),[C,w]),(0,i.useEffect)((function(){switch(a.itemType){case"service":if(a.servicesHasUnsavedChanges)break;f().then((function(e){var t=e.data.data,r=t.flatMap((function(e){return e.is_visible?e.id:[]}));return o({dispatchType:"servicesUpdated",change:{services:t,currentlyVisibleServices:r}}),t})).catch((function(e){console.error(e),o({dispatchType:"generalError",change:{generalError:e.message}})}));break;case"provider":if(a.providersHasUnsavedChanges)break;k().then((function(e){var t=e.data.data,r=t.flatMap((function(e){return e.is_visible?e.id:[]}));return o({dispatchType:"providersUpdated",change:{providers:t,currentlyVisibleProviders:r}}),t})).catch((function(e){console.error(e),o({dispatchType:"generalError",change:{generalError:e.message}})}))}}),[a.itemType]),(0,n.jsx)(p.Provider,{value:{crudState:a,dispatch:o,handleDeletingItem:function(e){var t,r,n;switch(a.itemType){case"provider":t=j,r=(0,c.__)("Are you sure you want to delete this Service Provider?","simplybook"),n="providerDeleted";break;case"service":t=_,r=(0,c.__)("Are you sure you want to delete this Service?","simplybook"),n="serviceDeleted";break;default:throw new Error("ItemType not set")}window.confirm(r)&&t(e).then((function(){o({dispatchType:n,change:{item:{id:e}}})})).catch((function(e){console.error("Error on deletion:",e)}))},saveItems:function(){var e,t,r,n,i;switch(a.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),a.itemType){case"provider":e=a.unsavedProviders,t=N,r=S,n={create:(0,c.__)("Error creating Service Provider","simplybook"),update:(0,c.__)("Error updating Service Provider","simplybook")},i={create:"providerCreatedSuccessfully",update:"providerUpdatedSuccessfully"};break;case"service":e=a.unsavedServices,t=g,r=y,n={create:(0,c.__)("Error creating Service","simplybook"),update:(0,c.__)("Error updating Service","simplybook")},i={create:"serviceCreatedSuccessfully",update:"serviceUpdatedSuccessfully"};break;default:throw new Error("ItemType not set")}if(0===Object.keys(e).length)throw o({dispatchType:"savingChanged",change:{isSaving:!1}}),new Error("Nothing to save");for(var s=function(e,t,r){var i,s;throw void 0===t&&(t=""),console.error("Error on save:",e),e.fields?o({dispatchType:"errorsOnFields",change:m(m({},"provider"===a.itemType&&{providerErrors:(i={},i[r]=e.fields,i)}),"service"===a.itemType&&{serviceErrors:(s={},s[r]=e.fields,s)})}):o({dispatchType:"generalError",change:{generalError:e.message}}),A.setMessage(t?n[t]:(0,c.__)("An error occurred trying to save your changes","simplybook")).setType("error").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}}),e},l=function(e){if(e.name||s(new u.f("No name provided",{name:(0,c.__)("Name is a required field.","simplybook")}),"",e.id),!e.id)throw new Error("No ID provided");var n=b(m({},e));"new"===e.id?t(n).then((function(e){o({dispatchType:i.create,change:{item:e.data}}),A.setMessage(e.message).setType("success").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}})})).catch((function(e){s(e,"create","new")})):r({id:e.id,data:n}).then((function(e){o({dispatchType:i.update,change:{item:e.data}}),A.setMessage(e.message).setType("success").render(),o({dispatchType:"savingChanged",change:{isSaving:!1}})})).catch((function(t){s(t,"update",e.id)}))},d=0,v=e;d<v.length;d++)l(v[d])}},children:t})},h=function(e,t){var r,n,i,a,s,l,c,d,u,p,f,g,h,b,_,w,E,k,N,S,j,_x,C,A,P,O,T,R,q,F,L;switch(t.dispatchType){case"crudItemTypeChanged":return m(m({},e),{itemType:t.change.itemType?t.change.itemType:null});case"unsavedChangesToProviders":if(!t.change.item)throw new Error("Item to update not set");var I=e.providers?e.providers.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,V=e.unsavedProviders?e.unsavedProviders.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,U=m(m({},V||I),t.change.item),D=o().isEqual(I,U),H=null!==(i=e.currentlyVisibleProviders)&&void 0!==i?i:[],B=Object.keys(t.change.item).includes("is_visible");if(D){var M=null!==(s=null===(a=e.unsavedProviders)||void 0===a?void 0:a.filter((function(e){return U.id!=e.id})))&&void 0!==s?s:[];return m(m(m({},e),{unsavedProviders:M,providersHasUnsavedChanges:!!M.length&&M.length>0}),B&&{currentlyVisibleProviders:y(Number(U.id),H,!!U.is_visible)})}var $=e.unsavedProviders?e.unsavedProviders.findIndex((function(e){return e.id===U.id})):-1,K=e.unsavedProviders?v([],e.unsavedProviders,!0):[];return-1!=$?K[$]=U:K.push(U),m(m(m({},e),{unsavedProviders:K,providersHasUnsavedChanges:!0}),B&&{currentlyVisibleProviders:y(Number(U.id),H,!!U.is_visible)});case"unsavedChangesToServices":if(!t.change.item)throw new Error("Item to update not set");var Q=e.services?e.services.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,z=e.unsavedServices?e.unsavedServices.find((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)})):null,W=m(m({},z||Q),t.change.item),G=o().isEqual(Q,W),J=null!==(l=e.currentlyVisibleServices)&&void 0!==l?l:[];if(B=Object.keys(t.change.item).includes("is_visible"),G){var X=null!==(d=null===(c=e.unsavedServices)||void 0===c?void 0:c.filter((function(e){return W.id!=e.id})))&&void 0!==d?d:[];return m(m(m({},e),{unsavedServices:X,servicesHasUnsavedChanges:!!X.length&&X.length>0}),B&&{currentlyVisibleServices:y(Number(W.id),J,!!W.is_visible)})}var Y=e.unsavedServices?e.unsavedServices.findIndex((function(e){return e.id===W.id})):-1,Z=e.unsavedServices?v([],e.unsavedServices,!0):[];return-1!=Y?Z[Y]=W:Z.push(W),m(m(m({},e),{unsavedServices:Z,servicesHasUnsavedChanges:!0}),B&&{currentlyVisibleServices:y(Number(W.id),J,!!W.is_visible)});case"providersUpdated":if(!t.change.providers)throw Error("Providers not set");return m(m(m({},e),{providers:t.change.providers}),t.change.currentlyVisibleProviders&&{currentlyVisibleProviders:t.change.currentlyVisibleProviders});case"servicesUpdated":if(!t.change.services)throw Error("Services not set");return m(m(m({},e),{services:t.change.services}),t.change.currentlyVisibleServices&&{currentlyVisibleServices:t.change.currentlyVisibleServices});case"isCreatingNewChanged":if(!t.change.isCreatingNewProvider&&!t.change.isCreatingNewService)throw new Error("No creating new state provided");return m(m(m({},e),"provider"===e.itemType&&{isCreatingNewProvider:t.change.isCreatingNewProvider}),"service"===e.itemType&&{isCreatingNewService:t.change.isCreatingNewService});case"cancelAllUnsavedChanges":var ee=void 0;switch(e.itemType){case"provider":ee=null===(u=e.providers)||void 0===u?void 0:u.filter((function(e){return e.is_visible})).map((function(e){return e.id}));break;case"service":ee=null===(p=e.services)||void 0===p?void 0:p.filter((function(e){return e.is_visible})).map((function(e){return e.id}));break;default:throw new Error("ItemType not set")}return m(m(m(m({},e),{generalError:""}),"provider"===e.itemType&&{providersHasUnsavedChanges:!1,currentlyVisibleProviders:ee,unsavedProviders:[],isCreatingNewProvider:!1,providerErrors:{}}),"service"===e.itemType&&{servicesHasUnsavedChanges:!1,currentlyVisibleServices:ee,unsavedServices:[],isCreatingNewService:!1,serviceErrors:{}});case"providerUpdatedSuccessfully":if(!t.change.item)throw new Error("No provider provided");var te=e.unsavedProviders?null===(f=e.unsavedProviders)||void 0===f?void 0:f.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],re=e.providers?e.providers.map((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)?m(m({},e),t.change.item):e})):[],ne=re.flatMap((function(e){return e.is_visible?e.id:[]}));return m(m({},e),{providers:re,unsavedProviders:te,providersHasUnsavedChanges:0!==te.length,currentlyVisibleProviders:ne});case"providerCreatedSuccessfully":if(!t.change.item)throw new Error("No provider provided");te=e.unsavedProviders?null===(g=e.unsavedProviders)||void 0===g?void 0:g.filter((function(e){return"new"!==e.id})):[];var ie=null!==(h=e.providers)&&void 0!==h?h:[];return ne=(re=v(v([],ie,!0),[t.change.item],!1)).flatMap((function(e){return e.is_visible?e.id:[]})),m(m({},e),{isCreatingNewProvider:!1,providers:re,unsavedProviders:te,providersHasUnsavedChanges:0!==te.length,currentlyVisibleProviders:ne});case"serviceUpdatedSuccessfully":if(!t.change.item)throw new Error("No service provided");var ae=e.unsavedServices?null===(b=e.unsavedServices)||void 0===b?void 0:b.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],oe=e.services?e.services.map((function(e){var r;return e.id===(null===(r=t.change.item)||void 0===r?void 0:r.id)?m(m({},e),t.change.item):e})):[],se=oe.flatMap((function(e){return e.is_visible?e.id:[]}));return m(m({},e),{services:oe,unsavedServices:ae,servicesHasUnsavedChanges:0!==ae.length,currentlyVisibleServices:se});case"serviceCreatedSuccessfully":if(!t.change.item)throw new Error("No new service provided");ae=e.unsavedServices?null===(_=e.unsavedServices)||void 0===_?void 0:_.filter((function(e){return"new"!==e.id})):[];var le=null!==(w=e.services)&&void 0!==w?w:[];return se=(oe=v(v([],le,!0),[t.change.item],!1)).flatMap((function(e){return e.is_visible?e.id:[]})),m(m({},e),{isCreatingNewService:!1,services:oe,unsavedServices:ae,servicesHasUnsavedChanges:0!==ae.length,currentlyVisibleServices:se});case"createNewCanceled":var ce=void 0;switch(e.itemType){case"provider":ce=null!==(k=null===(E=e.unsavedProviders)||void 0===E?void 0:E.filter((function(e){return"new"!=e.id})))&&void 0!==k?k:[];break;case"service":ce=null!==(S=null===(N=e.unsavedServices)||void 0===N?void 0:N.filter((function(e){return"new"!=e.id})))&&void 0!==S?S:[];break;default:throw new Error("ItemType not set")}return m(m(m({},e),"provider"===e.itemType&&{providersHasUnsavedChanges:!!ce.length&&ce.length>0,isCreatingNewProvider:!1,unsavedProviders:ce}),"service"===e.itemType&&{servicesHasUnsavedChanges:!!ce.length&&ce.length>0,isCreatingNewService:!1,unsavedProviders:ce});case"providerDeleted":if(!t.change.item)throw new Error("Item to delete not set");var de=e.providers?e.providers.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],ue=null!==(_x=null===(j=e.unsavedProviders)||void 0===j?void 0:j.filter((function(e){var r;return e.id!=(null===(r=t.change.item)||void 0===r?void 0:r.id)})))&&void 0!==_x?_x:[],me=!!t.change.item&&(null===(C=e.currentlyVisibleProviders)||void 0===C?void 0:C.includes(t.change.item.id));return H=null!==(A=e.currentlyVisibleProviders)&&void 0!==A?A:[],m(m(m({},e),{providers:de,unsavedProviders:ue,servicesHasUnsavedChanges:!!ue.length&&ue.length>0}),me&&{currentlyVisibleProviders:H.filter((function(e){var r;return e!=(null===(r=t.change.item)||void 0===r?void 0:r.id)}))});case"serviceDeleted":if(!t.change.item)throw new Error("Item to delete not set");var ve=e.services?e.services.filter((function(e){var r;return e.id!==(null===(r=t.change.item)||void 0===r?void 0:r.id)})):[],pe=null!==(O=null===(P=e.unsavedServices)||void 0===P?void 0:P.filter((function(e){var r;return e.id!=(null===(r=t.change.item)||void 0===r?void 0:r.id)})))&&void 0!==O?O:[];return me=!!t.change.item&&(null===(T=e.currentlyVisibleServices)||void 0===T?void 0:T.includes(t.change.item.id)),J=null!==(R=e.currentlyVisibleServices)&&void 0!==R?R:[],m(m(m({},e),{services:ve,unsavedServices:pe,servicesHasUnsavedChanges:!!pe.length&&pe.length>0}),me&&{currentlyVisibleServices:J.filter((function(e){var r;return e!=(null===(r=t.change.item)||void 0===r?void 0:r.id)}))});case"errorsOnFields":if(!t.change.providerErrors&&!t.change.serviceErrors)throw new Error("No errors provided ");var fe=void 0,ge=void 0,he=void 0;switch(e.itemType){case"provider":fe=e.providerErrors,ge=t.change.providerErrors,he=t.change.providerErrors&&Object.keys(t.change.providerErrors)[0];break;case"service":fe=e.serviceErrors,ge=t.change.serviceErrors,he=t.change.serviceErrors&&Object.keys(t.change.serviceErrors)[0];break;default:throw new Error("ItemType not set")}var ye=he&&fe?fe[he]:null,be=m(m({},ye),he&&ge&&m({},ge[he])),xe=m(m({},fe),he&&((r={})[he]=m({},be),r));return m(m(m({},e),"provider"===e.itemType&&{providerErrors:m({},xe)}),"service"===e.itemType&&{serviceErrors:m({},xe)});case"generalError":if("string"!=typeof t.change.generalError)throw new Error("No error provided");return m(m({},e),{generalError:t.change.generalError});case"clearErrorsForField":if(!t.change.item)throw new Error("No item provided");var _e=Object.keys(t.change.item).find((function(e){return"id"!==e}));if(!_e)throw new Error("No field provided");fe="provider"===e.itemType?e.providerErrors:e.serviceErrors;var we=(null===(q=t.change.item)||void 0===q?void 0:q.id)&&fe?fe[t.change.item.id]:null;return we&&_e&&delete we[_e],xe=m(m({},fe),t.change.item.id&&we&&((n={})[t.change.item.id]=we,n)),we&&0===Object.keys(we).length&&delete xe[t.change.item.id],m(m(m({},e),"provider"===e.itemType&&{providerErrors:m({},xe)}),"service"===e.itemType&&{serviceErrors:m({},xe)});case"clearAllErrorsForItem":if(!t.change.item)throw new Error("No item provided");return delete(ye="provider"===e.itemType?null!==(F=e.providerErrors)&&void 0!==F?F:{}:null!==(L=e.serviceErrors)&&void 0!==L?L:{})[t.change.item.id],m(m(m(m({},e),{generalError:""}),"provider"===e.itemType&&{providerErrors:m({},ye)}),"service"===e.itemType&&{serviceErrors:m({},ye)});case"loadingChanged":if(void 0===t.change.isLoading)throw new Error("isLoading not set");return m(m({},e),{isLoading:t.change.isLoading});case"savingChanged":if(void 0===t.change.isSaving)throw new Error("isLoading not set");return m(m({},e),{isSaving:t.change.isSaving});case"reset":return x;default:throw new Error("Unknown action: "+t.dispatchType)}},y=function(e,t,r){var n,i=t.includes(e);switch(r){case!0:i||t.push(e),n=t;break;case!1:i&&(t=null==t?void 0:t.filter((function(t){return t!==e}))),n=t}return n},b=function(e){var t;return m(m(m(m(m({name:e.name,is_visible:null===(t=e.is_visible)||void 0===t||t},e.id&&"new"!==e.id&&{id:e.id}),e.qty&&{qty:Math.max(Number(e.qty)||1,1)}),e.email&&{email:e.email||""}),e.phone&&{phone:e.phone||""}),e.duration&&{duration:e.duration})},x={itemType:null,item:null,unsavedProviders:[],unsavedServices:[],providerErrors:{},serviceErrors:{},currentlyVisibleProviders:[],currentlyVisibleServices:[],isLoading:!1,isSaving:!1,servicesHasUnsavedChanges:!1,providersHasUnsavedChanges:!1,isCreatingNewProvider:!1,isCreatingNewService:!1,generalError:""}},5591:(e,t,r)=>{r.d(t,{p:()=>u,E:()=>d});var n=r(790),i=r(1609),a=r(9270),o=r(4576);var s=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},l={activeNotifications:[],getNotification:function(){},triggerNotification:function(){return!1},triggerNotificationById:function(){return!1},getAllNotifications:function(){return!1}},c=(0,i.createContext)(l),d=function(){return(0,i.useContext)(c)},u=function(e){var t=e.children,r=function(){var e,t="get_notices",r=new o.A,n=(0,a.I)({queryKey:[t],queryFn:function(){return r.setRoute(t).get()},staleTime:3e5}),i=n.data,s=n.isLoading,l=n.error;return null!==l&&console.error("Error fetching notices: ",l.message),{allNotices:null==i?void 0:i.data,isLoading:s,hasError:null!==l,message:null!==(e=null==i?void 0:i.message)&&void 0!==e?e:null==l?void 0:l.message}}(),l=r.allNotices,d=r.isLoading,u=(0,i.useState)([]),m=u[0],v=u[1];(0,i.useEffect)((function(){if(l){var e=l.filter((function(e){return e.active}));e.length>0&&v((function(t){var r=e.filter((function(e){return!t.some((function(t){return t.id===e.id}))}));return s(s([],t,!0),r,!0)}))}}),[l]);var p=function(e){return l.find((function(t){return t.id===e}))},f=function(e){v((function(t){return t.some((function(t){return t.id===e.id}))?t:s(s([],t,!0),[e],!1)}))};if(!d)return(0,n.jsx)(c.Provider,{value:{activeNotifications:m,getNotification:p,triggerNotification:f,triggerNotificationById:function(e){var t=p(e);if(!t)return console.warn('Notification "'.concat(e,'" not found'));f(t)},getAllNotifications:function(){return m}},children:t})}},2001:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(7665),i=r(9270),a=r(7097),o=r(4576),s=function(){return s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},s.apply(this,arguments)},l=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{l(n.next(e))}catch(e){a(e)}}function s(e){try{l(n.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}l((n=n.apply(e,t||[])).next())}))},c=function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}};const d=function(e){var t,r,d,u,m,v,p,f=new o.A(e),g=(0,n.jE)(),h=(0,i.I)({queryKey:[e],queryFn:function(){return f.get()},staleTime:3e5,retry:1}),y=h.refetch,b=h.isLoading,x=h.error,_=h.data,w=(0,a.n)({mutationFn:function(e){return f.post(e)},onSuccess:function(){g.invalidateQueries({queryKey:[e]})}}),E=(0,a.n)({mutationFn:function(t){return l(void 0,void 0,void 0,(function(){return c(this,(function(r){switch(r.label){case 0:return[4,f.setRoute("".concat(e,"/").concat(t.id)).put(t.data)];case 1:return[2,r.sent()]}}))}))},onMutate:function(t){return l(void 0,void 0,void 0,(function(){var r;return c(this,(function(n){switch(n.label){case 0:return[4,g.cancelQueries({queryKey:[e]})];case 1:return n.sent(),r=g.getQueryData([e]),g.setQueryData([e],(function(e){return(null==e?void 0:e.data)?s(s({},e),{data:e.data.map((function(e){return e.id===t.id?s(s({},e),t.data):e}))}):e})),[2,{previousData:r}]}}))}))},onError:function(t,r,n){(null==n?void 0:n.previousData)&&g.setQueryData([e],n.previousData)},onSettled:function(){g.invalidateQueries({queryKey:[e]})}}),k=(0,a.n)({mutationFn:function(t){return f.setRoute("".concat(e,"/").concat(t)).delete()},onSuccess:function(){g.invalidateQueries({queryKey:[e]})}});return{data:null!==(t=null==_?void 0:_.data)&&void 0!==t?t:[],dataFetched:!b&&!x,isLoading:null!=b&&b,error:null!=x?x:null,get:y,create:w.mutateAsync,update:E.mutateAsync,delete:k.mutateAsync,isCreating:null!==(r=w.isPending)&&void 0!==r&&r,isUpdating:null!==(d=E.isPending)&&void 0!==d&&d,isDeleting:null!==(u=k.isPending)&&void 0!==u&&u,createError:null!==(m=w.error)&&void 0!==m?m:null,updateError:null!==(v=E.error)&&void 0!==v?v:null,deleteError:null!==(p=k.error)&&void 0!==p?p:null}}},1314:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(7665),i=r(9270),a=r(4576),o={data:{simplybook_external_login_url:""}};const s=function(){var e=(0,n.jE)(),t="get_login_url",r=new a.A(t),s=(0,i.I)({queryKey:[t],queryFn:function(){return r.get()},staleTime:36e5,retry:0,enabled:!1,initialData:o,refetchOnMount:!1,refetchOnReconnect:!1,refetchOnWindowFocus:!1});return{loginData:s.data,fetchLinkData:function(){return r=void 0,n=void 0,a=function(){var r;return function(e,t){var r,n,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(r=1,n&&(i=2&s[0]?n.return:s[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,s[1])).done)return i;switch(n=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,n=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],n=0}finally{r=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}(this,(function(n){switch(n.label){case 0:return[4,s.refetch()];case 1:return r=n.sent(),e.setQueryData([t],null==r?void 0:r.data),[2,null==r?void 0:r.data]}}))},new((i=void 0)||(i=Promise))((function(e,t){function o(e){try{l(a.next(e))}catch(e){t(e)}}function s(e){try{l(a.throw(e))}catch(e){t(e)}}function l(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(o,s)}l((a=a.apply(r,n||[])).next())}));var r,n,i,a}}}},9866:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1609),i=r(2001),a=r(5591);const o=function(){var e,t,r,o,s,l,c,d,u,m,v,p=(0,i.A)("providers"),f=(0,a.E)().triggerNotificationById;return(0,n.useEffect)((function(){var e;p.dataFetched&&0===(null===(e=p.data)||void 0===e?void 0:e.length)&&f("add_mandatory_provider")}),[p.dataFetched,null===(e=p.data)||void 0===e?void 0:e.length]),(0,n.useEffect)((function(){p.error&&console.error("Error fetching providers: ",p.error.message)}),[p.error]),{providers:null!==(t=p.data)&&void 0!==t?t:[],providersFetched:null!==(r=p.dataFetched)&&void 0!==r&&r,isLoading:null!==(o=p.isLoading)&&void 0!==o&&o,error:null!==(s=p.error)&&void 0!==s?s:null,getProviders:p.get,createProvider:p.create,updateProvider:p.update,deleteProvider:p.delete,isCreating:null!==(l=p.isCreating)&&void 0!==l&&l,isUpdating:null!==(c=p.isUpdating)&&void 0!==c&&c,isDeleting:null!==(d=p.isDeleting)&&void 0!==d&&d,createError:null!==(u=p.createError)&&void 0!==u?u:null,updateError:null!==(m=p.updateError)&&void 0!==m?m:null,deleteError:null!==(v=p.deleteError)&&void 0!==v?v:null}}},8981:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1609),i=r(2001),a=r(5591);const o=function(){var e,t,r,o,s,l,c,d,u,m,v,p=(0,i.A)("services"),f=(0,a.E)().triggerNotificationById;return(0,n.useEffect)((function(){var e;p.dataFetched&&0===(null===(e=p.data)||void 0===e?void 0:e.length)&&f("add_mandatory_service")}),[p.dataFetched,null===(e=p.data)||void 0===e?void 0:e.length]),(0,n.useEffect)((function(){p.error&&console.error("Error fetching services: ",p.error.message)}),[p.error]),{services:null!==(t=p.data)&&void 0!==t?t:[],servicesFetched:null!==(r=p.dataFetched)&&void 0!==r&&r,isLoading:null!==(o=p.isLoading)&&void 0!==o&&o,error:null!==(s=p.error)&&void 0!==s?s:null,getServices:p.get,createService:p.create,updateService:p.update,deleteService:p.delete,isCreating:null!==(l=p.isCreating)&&void 0!==l&&l,isUpdating:null!==(c=p.isUpdating)&&void 0!==c&&c,isDeleting:null!==(d=p.isDeleting)&&void 0!==d&&d,createError:null!==(u=p.createError)&&void 0!==u?u:null,updateError:null!==(m=p.updateError)&&void 0!==m?m:null,deleteError:null!==(v=p.deleteError)&&void 0!==v?v:null}}},3042:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(9270),i=r(8846),a=r(4576),o=r(5591);const s=function(){var e,t,r,s,l,c,d,u,m,v,p,f,g,h,y,b,x,_,w,E,k,_x,N,S,j,C,A,P,O,T,R,q,F,L=(0,i.A)().onboardingCompleted,I=(0,o.E)().triggerNotificationById,V="subscription_data",U=new a.A(V),D=(0,n.I)({queryKey:[V],queryFn:function(){return U.get()},staleTime:36e5,retry:0,enabled:!!L}),H=D.isLoading,B=D.error,M=D.data,$=D.refetch;return null!==B&&console.error("Error fetching subscription data: ",B.message),0===(null===(r=null===(t=null===(e=null==M?void 0:M.data)||void 0===e?void 0:e.limits)||void 0===t?void 0:t.provider_limit)||void 0===r?void 0:r.rest)&&I("maxed_out_providers"),{subscription:null==M?void 0:M.data,subscriptionPlan:null!==(l=null===(s=null==M?void 0:M.data)||void 0===s?void 0:s.subscription_name)&&void 0!==l?l:"",expiresIn:null!==(d=null===(c=null==M?void 0:M.data)||void 0===c?void 0:c.expire_in)&&void 0!==d?d:0,isExpired:null!==(m=null===(u=null==M?void 0:M.data)||void 0===u?void 0:u.is_expired)&&void 0!==m&&m,smsRemaining:null!==(g=null===(f=null===(p=null===(v=null==M?void 0:M.data)||void 0===v?void 0:v.limits)||void 0===p?void 0:p.sms_limit)||void 0===f?void 0:f.rest)&&void 0!==g?g:0,smsTotal:null!==(x=null===(b=null===(y=null===(h=null==M?void 0:M.data)||void 0===h?void 0:h.limits)||void 0===y?void 0:y.sms_limit)||void 0===b?void 0:b.total)&&void 0!==x?x:0,bookingsRemaining:null!==(k=null===(E=null===(w=null===(_=null==M?void 0:M.data)||void 0===_?void 0:_.limits)||void 0===w?void 0:w.sheduler_limit)||void 0===E?void 0:E.rest)&&void 0!==k?k:0,bookingsTotal:null!==(j=null===(S=null===(N=null===(_x=null==M?void 0:M.data)||void 0===_x?void 0:_x.limits)||void 0===N?void 0:N.sheduler_limit)||void 0===S?void 0:S.total)&&void 0!==j?j:0,providersRemaining:null!==(O=null===(P=null===(A=null===(C=null==M?void 0:M.data)||void 0===C?void 0:C.limits)||void 0===A?void 0:A.provider_limit)||void 0===P?void 0:P.rest)&&void 0!==O?O:0,providersTotal:null!==(F=null===(q=null===(R=null===(T=null==M?void 0:M.data)||void 0===T?void 0:T.limits)||void 0===R?void 0:R.provider_limit)||void 0===q?void 0:q.total)&&void 0!==F?F:0,getSubscriptionData:$,isLoading:H,hasError:null!==B}}},9592:(e,t,r)=>{r.d(t,{DN:()=>a,V_:()=>o,W6:()=>s,X2:()=>i,au:()=>n,e8:()=>l});const n=simplybook.nonce,i=simplybook.x_wp_nonce,a=simplybook.rest_namespace+"/"+simplybook.rest_version+"/",o=simplybook.rest_url+simplybook.rest_namespace+"/"+simplybook.rest_version+"/",s=c("rest_url"),l=(c("ajax_url"),simplybook.simplybook_domains);function c(e){let t=simplybook[e];return"https:"!==window.location.protocol||t.includes("https://")||(t=t.replace("http://","https://")),t}},1793:(e,t,r)=>{r.d(t,{A:()=>i});var n=r(9592);const i=()=>n.W6.includes("?")?"&":"?"},5204:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(1455),i=r.n(n);var a=r(1793);var o=r(9592);const s=async(e,t="POST",r={})=>{const n={path:e,method:t,data:r};n.path=o.DN+n.path+(0,a.A)()+"&token="+Math.random().toString(36).substring(2,7),n.data={...r,nonce:o.au},"GET"===t&&console.log("the request method is not adjusted for GET requests yet. ");try{return await(async(e,t="POST",r={})=>{const n={path:e,method:t,data:r};return await i()(n)})(n.path,n.method,n.data)}catch(e){((e,t)=>{console.error(`API Error at ${t}:`,e.message||e)})(e,n.path)}}},4705:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(1728),i=r(1609),a=r.n(i),o=r(8846),s=r(7723);const l=()=>{const e=(0,n.c)(21),[t,r]=(0,i.useState)(0),{onboardingCompleted:l}=(0,o.A)(),[c,d]=(0,i.useState)(!1),[u,m]=(0,i.useState)(0);let v,p,f;e[0]!==u||e[1]!==l?(v=()=>{const e=setInterval((()=>{r((t=>{let r=t+.3333333333333333;return r>90&&!l&&(d(!0),r=5,m(u+1)),u>5&&!l&&(r=100),r>=100?(clearInterval(e),d(!1),100):r}))}),100);return()=>clearInterval(e)},e[0]=u,e[1]=l,e[2]=v):v=e[2],e[3]===Symbol.for("react.memo_cache_sentinel")?(p=[],e[3]=p):p=e[3],(0,i.useEffect)(v,p),e[4]===Symbol.for("react.memo_cache_sentinel")?(f=window.location.href.includes("onboarding"),e[4]=f):f=e[4];const g=f,h=g?"animate-pulse":"";let y,b,x,_,w,E,k,N,S,j;return e[5]!==t?(y=g&&a().createElement("div",{className:"w-full"},a().createElement("div",{className:"w-full h-1 bg-gray-200 rounded-t-lg overflow-hidden"},a().createElement("div",{className:"h-full bg-blue-500 transition-all duration-100",style:{width:`${t}%`}}))),e[5]=t,e[6]=y):y=e[6],e[7]!==u||e[8]!==c?(b=g&&a().createElement(a().Fragment,null,u<=5&&a().createElement(a().Fragment,null,!c&&a().createElement("p",null,(0,s.__)("Please wait while your registration is being processed. This usually takes about 30 seconds.","simplybook")),c&&a().createElement("p",null,(0,s.__)("This is taking a bit longer than expected. Please wait while we retry a few times.","simplybook"))),u>5&&a().createElement("p",null,(0,s.__)("We're sorry, but it seems there is a problem with your registration. Please try again later.","simplybook"))),e[7]=u,e[8]=c,e[9]=b):b=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(x=!g&&a().createElement("p",null,(0,s.__)("Please complete the onboarding first to register your account.","simplybook")),e[10]=x):x=e[10],e[11]!==b?(_=a().createElement("div",{className:"text-gray-400 text-center p-3  bg-gray-100"},b,x),e[11]=b,e[12]=_):_=e[12],e[13]===Symbol.for("react.memo_cache_sentinel")?(w=a().createElement("div",{className:"p-4"},a().createElement("div",{className:"text-center h-40"},a().createElement("div",{className:"w-full h-full bg-gray-100 rounded-md"}))),e[13]=w):w=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(E=a().createElement("h4",{className:"text-gray-700 font-bold mb-4"},a().createElement("div",{className:"h-6 bg-gray-100 rounded-md"})),e[14]=E):E=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(k=a().createElement("div",{className:"grid grid-cols-3 gap-3"},a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"}),a().createElement("div",{className:"text-white text-center py-2 rounded-md bg-gray-100 w-full h-10"})),e[15]=k):k=e[15],e[16]===Symbol.for("react.memo_cache_sentinel")?(N=a().createElement("span",{className:"inline-block w-3 h-3 rounded-full bg-gray-100"}),e[16]=N):N=e[16],e[17]===Symbol.for("react.memo_cache_sentinel")?(S=a().createElement("div",{className:"p-4 border-t"},E,k,a().createElement("div",{className:"text-gray-500 text-sm mt-3"},N," - ",a().createElement("span",{className:"font-medium"}))),e[17]=S):S=e[17],e[18]!==y||e[19]!==_?(j=a().createElement("div",{className:"w-full max-w-md bg-white shadow-md mt-5 "+h},y,_,w,S),e[18]=y,e[19]=_,e[20]=j):j=e[20],j};var c=r(3775),d=r(9270),u=r(5204);const m=e=>{const t=(0,n.c)(12),{primary:r,secondary:a,active:s,onboardingCompleted:m}=e,{createPreviewWidget:p}=(0,c.A)(),{startPolling:f,pollingEnabled:g,pollingSuccess:h}=(()=>{const e=(0,n.c)(20),{onboardingCompleted:t,setOnboardingCompleted:r}=(0,o.A)(),[a,s]=(0,i.useState)(!t);let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l={status:"waiting"},e[0]=l):l=e[0];const[c,m]=(0,i.useState)(l),[v,p]=(0,i.useState)(0),[f,g]=(0,i.useState)(!1);let h,y,b;e[1]===Symbol.for("react.memo_cache_sentinel")?(h=["registration_callback_status"],y={status:"waiting"},e[1]=h,e[2]=y):(h=e[1],y=e[2]),e[3]!==v||e[4]!==a||e[5]!==c||e[6]!==r?(b=async()=>{if(!a)return console.log("Polling disabled"),c;p(v+1);const e=await(0,u.A)("check_registration_callback_status","POST",{data:{status:"waiting"}});return m(e.data),"completed"===e.data.status&&(s(!1),g(!0),r(!0)),v>100&&s(!1),e.data},e[3]=v,e[4]=a,e[5]=c,e[6]=r,e[7]=b):b=e[7];const x=!!a;let _,w,E;e[8]!==a?(_=e=>!!a&&3e3,e[8]=a,e[9]=_):_=e[9],e[10]===Symbol.for("react.memo_cache_sentinel")?(w=e=>{s(!1)},e[10]=w):w=e[10],e[11]!==b||e[12]!==x||e[13]!==_?(E={queryKey:h,initialData:y,queryFn:b,enabled:x,refetchInterval:_,onError:w},e[11]=b,e[12]=x,e[13]=_,e[14]=E):E=e[14];const{isFetching:k}=(0,d.I)(E);let N,S;return e[15]===Symbol.for("react.memo_cache_sentinel")?(N=()=>s(!0),e[15]=N):N=e[15],e[16]!==k||e[17]!==a||e[18]!==f?(S={startPolling:N,pollingEnabled:a,isPolling:k,pollingSuccess:f},e[16]=k,e[17]=a,e[18]=f,e[19]=S):S=e[19],S})();let y,b,x;t[0]!==g||t[1]!==f?(y=()=>{!1===g&&f()},t[0]=g,t[1]=f,t[2]=y):y=t[2],t[3]!==m?(b=[m],t[3]=m,t[4]=b):b=t[4],(0,i.useEffect)(y,b),t[5]!==s||t[6]!==h||t[7]!==r||t[8]!==a?(x=[r,a,s,h],t[5]=s,t[6]=h,t[7]=r,t[8]=a,t[9]=x):x=t[9],(0,i.useEffect)((()=>{h&&_(r,a,s)}),x);const _=(e,t,r)=>{p({onboarding:!0,primary:e,secondary:t,active:r}).then(v)};if(!m){let e;return t[10]===Symbol.for("react.memo_cache_sentinel")?(e=React.createElement(l,null),t[10]=e):e=t[10],e}let w;return t[11]===Symbol.for("react.memo_cache_sentinel")?(w=React.createElement("div",{id:"sbw_z0hg2i_calendar",className:" w-full -mt-20",style:{height:"1200px"}}),t[11]=w):w=t[11],w};function v(e){const t=document.createElement("script");t.id="simplybook-preview-widget-script",t.innerHTML=e.data.widget,document.body.appendChild(t),document.dispatchEvent(new CustomEvent("loadSimplyBookPreviewWidget"))}},1577:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(1728),i=r(982),a=r(6188),o=r(9656),s=r(7875);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}const c={"calendar-day":o.isQ,"calendar-week":o.aXh,retry:o.buE,"square-arrow-up-right":a.fLi,"circle-check":a.QRE,"circle-xmark":a.bnw,warning:a.JAe,spinner:a.z1G,"chevron-down":a.Jt$,"chevron-up":a.w2A,check:a.e68,"info-circle":o.iW_,"warning-circle":o.lEd,times:a.GRI,trophy:a.iHh,"user-group":a.USd,eye:a.pS3,bullhorn:a.e4L,support:o.Bwz,clock:a.a$,circle:a.GEE,cart:a._Ro,"target-blank":a.Ju_,youtube:s.B4m,tips:a.Jew},d=e=>{const t=(0,n.c)(18);let r,o,s,d,u;t[0]!==e?(({name:r,color:s,size:d,className:u,...o}=e),t[0]=e,t[1]=r,t[2]=o,t[3]=s,t[4]=d,t[5]=u):(r=t[1],o=t[2],s=t[3],d=t[4],u=t[5]);const m=void 0===s?"black":s,v=void 0===d?"1x":d,p=void 0===u?"":u;let f=c[r];f||(console.warn(`Icon "${r}" does not exist in iconMap.`),f=a.GEE);const g="spinner"===r;let h,y,b;return t[6]!==r?(h="spinner"===r&&{animationDuration:"2s"},t[6]=r,t[7]=h):h=t[7],t[8]!==m||t[9]!==h?(y={color:m,...h},t[8]=m,t[9]=h,t[10]=y):y=t[10],t[11]!==p||t[12]!==f||t[13]!==o||t[14]!==v||t[15]!==g||t[16]!==y?(b=React.createElement(i.g,l({icon:f,size:v,spin:g,className:p,style:y},o)),t[11]=p,t[12]=f,t[13]=o,t[14]=v,t[15]=g,t[16]=y,t[17]=b):b=t[17],b}},323:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(1728),i=r(1609),a=r.n(i),o=r(1577),s=r(4164),l=r(8908),c=r(8846),d=r(1314);const u=e=>{const t=(0,n.c)(26),{className:r,page:i,isButton:u,size:m,btnVariant:p,children:f,disabled:g,iconName:h,iconSize:y,iconClass:b,iconStyle:x,onClick:_,reverseIcon:w}=e,E=void 0===r?"":r,k=void 0===i?"":i,N=void 0!==u&&u,S=void 0===m?"md":m,j=void 0===p?"primary":p,C=void 0===f?"":f,A=void 0!==g&&g,P=void 0===h?"":h,O=void 0===y?"":y,T=void 0===b?"":b,R=void 0===x?"":x,q=void 0!==w&&w,{fetchLinkData:F}=(0,d.A)();let L;(0,c.A)(),t[0]!==F?(L=(e,t)=>{e.preventDefault(),F().then((e=>{const r=e?.data.simplybook_external_login_url;if(!r)return void console.error("No link found in response");let n=`${r}/${t}/`;r.includes("by-hash")&&(n=`${r}?back_url=/${t}/`),window.open(n,"_blank"),window.focus()})).catch(v)},t[0]=F,t[1]=L):L=t[1];const I=L,V=`${A?"pointer-events-none opacity-50 cursor-not-allowed":""}${E} `;if(N){let e,r;return t[2]!==I||t[3]!==k?(e=e=>I(e,k),t[2]=I,t[3]=k,t[4]=e):e=t[4],t[5]!==j||t[6]!==C||t[7]!==V||t[8]!==A||t[9]!==S||t[10]!==e?(r=a().createElement(l.A,{disabled:A,label:C,onClick:e,className:V,btnVarisant:j,size:S},C),t[5]=j,t[6]=C,t[7]=V,t[8]=A,t[9]=S,t[10]=e,t[11]=r):r=t[11],r}let U,D,H;return t[12]!==I||t[13]!==k?(U=e=>I(e,k),t[12]=I,t[13]=k,t[14]=U):U=t[14],t[15]!==T||t[16]!==P||t[17]!==O||t[18]!==R||t[19]!==q?(D=P.length>0&&a().createElement(o.A,{className:(0,s.A)(T,{"mr-2":!q,"ml-2":q}),name:P,size:O,style:R}),t[15]=T,t[16]=P,t[17]=O,t[18]=R,t[19]=q,t[20]=D):D=t[20],t[21]!==C||t[22]!==V||t[23]!==U||t[24]!==D?(H=a().createElement("a",{href:"#",className:V,onClick:U},C,D),t[21]=C,t[22]=V,t[23]=U,t[24]=D,t[25]=H):H=t[25],H};u.displayName="LoginLink";const m=u;function v(e){console.error("Error fetching login URL:",e)}},296:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(1728),i=r(9681);const a=e=>{const t=(0,n.c)(12),{error:r,errorHeading:a,resolve:o}=e;let s;t[0]!==o?(s=void 0===o?{}:o,t[0]=o,t[1]=s):s=t[1];const l=s;if(!r)return null;let c,d,u,m;return t[2]!==a?(c=React.createElement("strong",{className:"font-bold"},a),t[2]=a,t[3]=c):c=t[3],t[4]!==r?(d=React.createElement("p",{className:"m-0 mt-2"},r),t[4]=r,t[5]=d):d=t[5],t[6]!==l?(u=l&&React.createElement(i.N_,{className:"mt-2 text-red-500 underline block",onClick:l?.callback},l?.label),t[6]=l,t[7]=u):u=t[7],t[8]!==c||t[9]!==d||t[10]!==u?(m=React.createElement("div",{className:"animate-floatIn mt-4 bg-red-100  border-red-500 text-red-500 border-2 px-4 py-3 rounded relative shadow-lg",role:"alert"},c,d,u),t[8]=c,t[9]=d,t[10]=u,t[11]=m):m=t[11],m}},332:(e,t,r)=>{r.d(t,{A:()=>d});var n=r(1728),i=r(1609),a=r(8908),o=r(7967),s=r(1577);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(null,arguments)}const c=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(22);let i,c,d,u,m,v;if(r[0]!==e){const{setting:t,label:n,help:a,context:o,className:s,button:l,...p}=e;m=n,u=a,d=o,c=s,i=l,v=p,r[0]=e,r[1]=i,r[2]=c,r[3]=d,r[4]=u,r[5]=m,r[6]=v}else i=r[1],c=r[2],d=r[3],u=r[4],m=r[5],v=r[6];const p=i?.btnVariant,f=i?.disabled,g=i?.showLoader,h=i?.onClick;let y,b,x;return r[7]!==v.showLoader?(y=v.showLoader&&React.createElement(s.A,{color:"white",name:"spinner",size:"1x",className:"mr-2"}),r[7]=v.showLoader,r[8]=y):y=r[8],r[9]!==m||r[10]!==v||r[11]!==p||r[12]!==f||r[13]!==g||r[14]!==h||r[15]!==y?(b=React.createElement(a.A,l({btnVariant:p,disabled:f,showLoader:g,onClick:h},v),y,m),r[9]=m,r[10]=v,r[11]=p,r[12]=f,r[13]=g,r[14]=h,r[15]=y,r[16]=b):b=r[16],r[17]!==c||r[18]!==d||r[19]!==u||r[20]!==b?(x=React.createElement(o.A,{label:"",help:u,context:d,className:c,inputId:""},b),r[17]=c,r[18]=d,r[19]=u,r[20]=b,r[21]=x):x=r[21],x}));c.displayName="ButtonField";const d=c},7581:(e,t,r)=>{r.d(t,{A:()=>m});var n=r(1728),i=r(1609),a=r(790),o=r(5189),s=(0,i.forwardRef)((function(e,t){var r=e.colorValue,n=void 0===r?"#ffffff":r,s=e.onChangeComplete,l=(0,i.useState)(n),c=l[0],d=l[1];return(0,a.jsx)("div",{ref:t,children:(0,a.jsx)(o.xk,{color:c,onChange:function(e){d(e.hex)},onChangeComplete:function(e){return null==s?void 0:s(e.hex)},disableAlpha:!0})})}));s.displayName="ColorPicker";const l=s;var c=r(7967),d=r(9922);const u=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(38);let a,o,s,u,m,p,f,g,h;if(r[0]!==e){const{setting:t,fieldState:n,label:i,help:l,context:c,className:d,onChange:v,defaultValue:y,setColorOnClose:b,...x}=e;h=t,s=n,m=i,u=l,o=c,a=d,p=v,g=b,f=x,r[0]=e,r[1]=a,r[2]=o,r[3]=s,r[4]=u,r[5]=m,r[6]=p,r[7]=f,r[8]=g,r[9]=h}else a=r[1],o=r[2],s=r[3],u=r[4],m=r[5],p=r[6],f=r[7],g=r[8],h=r[9];const[y,b]=(0,i.useState)(h.value||h.default),[x,_]=(0,i.useState)(!1);let w,E,k;r[10]!==y||r[11]!==f.value?(w=()=>{f.value&&f.value!==y&&b(f.value)},r[10]=y,r[11]=f.value,r[12]=w):w=r[12],r[13]!==f.value?(E=[f.value],r[13]=f.value,r[14]=E):E=r[14],(0,i.useEffect)(w,E),r[15]!==y||r[16]!==g?(k=e=>{_(e),!e&&g&&g(y)},r[15]=y,r[16]=g,r[17]=k):k=r[17];const N=k;let S;r[18]!==p?(S=(e,t)=>{b(e),p&&p(e)},r[18]=p,r[19]=S):S=r[19];const j=S;let C;r[20]!==y||r[21]!==j||r[22]!==N||r[23]!==x||r[24]!==h.disabled?(C=e=>{const{label:t}=e,r=h.disabled?"opacity-50 cursor-not-allowed":"cursor-pointer";return React.createElement(React.Fragment,null,React.createElement(d.bL,{open:x,onOpenChange:h.disabled?v:N},React.createElement(d.l9,{className:"p-1 w-full bg-transparent rounded-md border border-gray-400 min-w-[140px] text-base"},React.createElement("div",{className:r+" text-left xl:whitespace-wrap xl:text-center min-w-5 flex p-1.5 gap-3.5 items-center"},React.createElement("div",{className:"rounded-full min-w-5 h-5 border border-gray-300",style:{backgroundColor:y}}),t)),React.createElement(d.ZL,null,React.createElement(d.UC,null,React.createElement(l,{colorValue:y,onChangeComplete:j})))))},r[20]=y,r[21]=j,r[22]=N,r[23]=x,r[24]=h.disabled,r[25]=C):C=r[25];const A=C,P=s?.error?.message;let O,T;return r[26]!==A||r[27]!==m||r[28]!==h?(O=React.createElement(A,{setting:h,label:m}),r[26]=A,r[27]=m,r[28]=h,r[29]=O):O=r[29],r[30]!==a||r[31]!==o||r[32]!==u||r[33]!==f.required||r[34]!==h.id||r[35]!==P||r[36]!==O?(T=React.createElement(React.Fragment,null,React.createElement(c.A,{label:"",help:u,error:P,context:o,className:a,inputId:h.id,required:f.required},O)),r[30]=a,r[31]=o,r[32]=u,r[33]=f.required,r[34]=h.id,r[35]=P,r[36]=O,r[37]=T):T=r[37],T}));u.displayName="ColorPickerField";const m=u;function v(){}},704:(e,t,r)=>{r.d(t,{A:()=>p});var n=r(1728),i=r(1609),a=r.n(i),o=r(7967),s=r(790),l=r(7723),c=r(4164),d=function(){return d=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},d.apply(this,arguments)};const u=a().forwardRef((function(e,t){var r=e.name,n=(e.fieldState,e.value),i=e.onChange,a=e.options,o=void 0===a?[]:a,u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["name","fieldState","value","onChange","options"]),m=Array.isArray(o)?o:Object.keys(o).map((function(e){return{key:e,value:e,label:o[e]}})),v=n?"":"border-gray-200 text-gray-500 italic";return(0,s.jsxs)("select",d({className:(0,c.A)("input-base transition-[border-color] duration-300 ease-in-out",v),name:r,value:n,onChange:i,ref:t},u,{children:[!n&&(0,s.jsxs)("option",{value:"",disabled:!0,children:["- ",(0,l.__)("Select an option","simplybook")," -"]}),m.map((function(e){return(0,s.jsx)("option",{value:e.value,children:e.label},e.key?e.key:e.value)}))]}))}));function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(null,arguments)}const v=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(29);let i,a,s,l,c,d,v,p,f;r[0]!==e?(({setting:f,field:s,fieldState:l,label:d,help:c,context:a,className:i,options:v,...p}=e),r[0]=e,r[1]=i,r[2]=a,r[3]=s,r[4]=l,r[5]=c,r[6]=d,r[7]=v,r[8]=p,r[9]=f):(i=r[1],a=r[2],s=r[3],l=r[4],c=r[5],d=r[6],v=r[7],p=r[8],f=r[9]);const g=f.id,h=l?.error?.message,y=!!l?.error?.message;let b,x;return r[10]!==s||r[11]!==l||r[12]!==g||r[13]!==v||r[14]!==p||r[15]!==t||r[16]!==y?(b=React.createElement(u,m({id:g,options:v,fieldState:l,"aria-invalid":y},s,{ref:t},p)),r[10]=s,r[11]=l,r[12]=g,r[13]=v,r[14]=p,r[15]=t,r[16]=y,r[17]=b):b=r[17],r[18]!==i||r[19]!==a||r[20]!==l||r[21]!==c||r[22]!==g||r[23]!==d||r[24]!==p.required||r[25]!==p.tooltip||r[26]!==h||r[27]!==b?(x=React.createElement(o.A,{label:d,tooltip:p.tooltip,help:c,error:h,context:a,className:i,inputId:g,required:p.required,fieldState:l},b),r[18]=i,r[19]=a,r[20]=l,r[21]=c,r[22]=g,r[23]=d,r[24]=p.required,r[25]=p.tooltip,r[26]=h,r[27]=b,r[28]=x):x=r[28],x}));v.displayName="SelectField";const p=v},4499:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1728),i=r(359),a=r(7967);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},o.apply(null,arguments)}const s=e=>{const t=(0,n.c)(27);let r,s,l,c,d,u,m,v,p,f;if(t[0]!==e){const{setting:n,fieldState:i,name:a,label:o,help:g,context:h,className:y,type:b,copyField:x,required:_,...w}=e;p=n,c=i,u=a,d=o,s=h,r=y,f=b,l=x,v=_,m=w,t[0]=e,t[1]=r,t[2]=s,t[3]=l,t[4]=c,t[5]=d,t[6]=u,t[7]=m,t[8]=v,t[9]=p,t[10]=f}else r=t[1],s=t[2],l=t[3],c=t[4],d=t[5],u=t[6],m=t[7],v=t[8],p=t[9],f=t[10];const g=p.id,h=!!c?.error?.message,y=l??!1;let b,x;return t[11]!==g||t[12]!==u||t[13]!==m||t[14]!==h||t[15]!==y||t[16]!==f?(b=React.createElement(i.A,o({name:u,id:g,type:f,"aria-invalid":h,clickToSelect:y},m)),t[11]=g,t[12]=u,t[13]=m,t[14]=h,t[15]=y,t[16]=f,t[17]=b):b=t[17],t[18]!==r||t[19]!==s||t[20]!==c||t[21]!==g||t[22]!==d||t[23]!==m.tooltip||t[24]!==v||t[25]!==b?(x=React.createElement(a.A,{label:d,tooltip:m.tooltip,context:s,className:r,inputId:g,required:v,fieldState:c},b),t[18]=r,t[19]=s,t[20]=c,t[21]=g,t[22]=d,t[23]=m.tooltip,t[24]=v,t[25]=b,t[26]=x):x=t[26],x};s.displayName="TextField";const l=s},6475:(e,t,r)=>{r.d(t,{A:()=>Ne});var n=r(1728),i=r(1609),a=r.n(i),o=r(9785),s=r(4499),l=r(790),c=function(){return c=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},c.apply(this,arguments)},d=(0,i.forwardRef)((function(e,t){e.type,e.className;var r=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["type","className"]);return(0,l.jsx)("input",c({ref:t,type:"hidden"},r))}));d.displayName="HiddenInput";const u=d;function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m.apply(null,arguments)}const v=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(10);let i,a,o,s;if(r[0]!==e){const{setting:t,field:n,fieldState:l,label:c,help:d,context:u,className:m,...v}=e;s=t,i=n,a=l,o=v,r[0]=e,r[1]=i,r[2]=a,r[3]=o,r[4]=s}else i=r[1],a=r[2],o=r[3],s=r[4];const l=!!a?.error?.message;let c;return r[5]!==i||r[6]!==o||r[7]!==s.id||r[8]!==l?(c=React.createElement(u,m({},i,{id:s.id,type:"hidden","aria-invalid":l},o)),r[5]=i,r[6]=o,r[7]=s.id,r[8]=l,r[9]=c):c=r[9],c}));v.displayName="HiddenField";const p=v;var f=r(4164),g=r(9418),h=r(5946),y=function(){return y=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},y.apply(this,arguments)},b=(0,i.forwardRef)((function(e,t){var r=e.label,n=e.className,a=e.tooltip,o=e.value,s=e.onChange,c=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r}(e,["label","className","tooltip","value","onChange"]),d=(0,i.useState)(1==o),u=d[0],m=d[1],v=(0,i.useState)(1==o?1:0),p=v[0],b=v[1],x=(0,f.A)("input-type-checkbox w-10 h-6 bg-gray-200  peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:bg-blue-600","peer-checked:after:translate-x-[1.125rem] peer-checked:after:border-white after:content-[''] after:absolute after:top-1 after:left-0.5 after:bg-white after:border-gray-200 after:border","after:rounded-full after:aspect-square after:h-4 after:w-4 after:transition-all");return(0,l.jsxs)("label",{className:"checkbox-field relative inline-flex items-center cursor-pointer",children:[(0,l.jsx)("input",y({type:"checkbox",checked:u,onChange:function(e){b(e.target.checked?1:0),m(e.target.checked),s&&s(e)},className:"sr-only peer",value:p},c)),(0,l.jsx)("div",{className:(0,f.A)(x,n)}),r&&(0,l.jsx)("span",{className:"ml-2 leading-5 font-medium text-black text-label ".concat(n||""),dangerouslySetInnerHTML:{__html:g.A.sanitize(r)}}),a&&(0,l.jsx)(h.A,{message:null==a?void 0:a.message,type:null==a?void 0:a.type})]})}));b.displayName="CheckboxInput";const x=b;var _=r(7967);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},w.apply(null,arguments)}const E=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(22);let i,a,o,s,l,c,d;r[0]!==e?(({setting:d,fieldState:o,label:l,help:s,context:a,className:i,...c}=e),r[0]=e,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=c,r[7]=d):(i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],c=r[6],d=r[7]);const u=d.id,m=o?.error?.message,v=!!o?.error?.message;let p,f;return r[8]!==u||r[9]!==l||r[10]!==c||r[11]!==v?(p=React.createElement(x,w({tooltip:c.tooltip,label:l,id:u,"aria-invalid":v},c)),r[8]=u,r[9]=l,r[10]=c,r[11]=v,r[12]=p):p=r[12],r[13]!==i||r[14]!==a||r[15]!==o||r[16]!==s||r[17]!==u||r[18]!==c.required||r[19]!==m||r[20]!==p?(f=React.createElement(_.A,{label:"",help:s,error:m,context:a,className:i,inputId:u,fieldState:o,required:c.required,type:"checkbox"},p),r[13]=i,r[14]=a,r[15]=o,r[16]=s,r[17]=u,r[18]=c.required,r[19]=m,r[20]=p,r[21]=f):f=r[21],f}));E.displayName="CheckboxField";const k=E;var N=r(704),S=r(6244),j=r(7723),C=r(7581);const A=function(e){var t=e.options,r=e.value,n=e.onChange;return(0,l.jsx)("div",{className:"flex gap-4",children:t.map((function(e){return(0,l.jsxs)("button",{onClick:function(t){return function(e,t,r){e.preventDefault(),r.is_premium||n(t)}(t,e.value,e)},className:"relative flex flex-col items-start justify-start px-4 py-3 rounded-lg border text-center \n            transition duration-300 ease-in-out w-full \n            ".concat(r===e.value?"bg-primary-lighter border-blue-500 cursor-pointer":"bg-white hover:bg-primary-lighter border-gray-300 hover:border-blue-500 cursor-pointer"),children:[(0,l.jsx)("span",{className:"text-lg font-medium",children:e.label}),e.description&&(0,l.jsx)("span",{className:"text-sm text-gray-500 mt-1",children:e.description})]},e.value)}))})};var P=r(1730);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},O.apply(null,arguments)}var T=r(8981),R=r(323),q=r(9270),F=r(8846),L=r(4576);const I=function(){var e,t,r=(0,F.A)().onboardingCompleted,n="get_domain",i=new L.A(n),a=(0,q.I)({queryKey:[n],queryFn:function(){return i.get()},staleTime:36e5,retry:0,enabled:!!r}),o=a.isLoading,s=a.error,l=a.data;return null!==s&&console.error("Error fetching domain data:",s.message),{domain:null===(e=null==l?void 0:l.data)||void 0===e?void 0:e.domain,domainFetched:!o,hasError:null!==s,message:null!==(t=null==l?void 0:l.message)&&void 0!==t?t:null==s?void 0:s.message}};var V=r(1888),U=r(1577);const D=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(39),{upgrade:i,link:o,item:s}=e,{domain:l,domainFetched:c,hasError:d}=I(),u=c&&s.picture_preview&&s.picture_preview.length>0,m=i?"justify-start":"justify-between";let v,p,g,h,y,b,x,_,w,E,k;return r[0]!==m?(v=(0,f.A)(m,"flex flex-row items-center w-full space-x-3 text-base"),r[0]=m,r[1]=v):v=r[1],r[2]===Symbol.for("react.memo_cache_sentinel")?(p=(0,f.A)("flex items-center"),r[2]=p):p=r[2],r[3]!==l||r[4]!==c||r[5]!==d||r[6]!==u||r[7]!==s.picture_preview||r[8]!==i?(g=!i&&c&&!d&&u&&a().createElement("img",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-md",src:l+s.picture_preview,alt:(0,j.__)("Loading","simplybook")}),r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=s.picture_preview,r[8]=i,r[9]=g):g=r[9],r[10]!==c||r[11]!==d||r[12]!==u||r[13]!==s.name||r[14]!==i?(h=!i&&c&&!d&&!u&&a().createElement("div",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-md font-bold"},s.name.charAt(0).toUpperCase()),r[10]=c,r[11]=d,r[12]=u,r[13]=s.name,r[14]=i,r[15]=h):h=r[15],r[16]!==i?(y=i&&a().createElement("div",{className:"w-20 h-20 max-w-[48px] max-h-[48px] bg-tertiary text-xs flex items-center justify-center overflow-hidden rounded-md font-bold text-white"},a().createElement(U.A,{name:"chevron-up",style:{color:"white"}})),r[16]=i,r[17]=y):y=r[17],r[18]!==s.name?(b=a().createElement("div",{className:"font-bold ml-4"},s.name),r[18]=s.name,r[19]=b):b=r[19],r[20]!==g||r[21]!==h||r[22]!==y||r[23]!==b?(x=a().createElement("div",{className:p},g,h,y,b),r[20]=g,r[21]=h,r[22]=y,r[23]=b,r[24]=x):x=r[24],r[25]!==c||r[26]!==d||r[27]!==o||r[28]!==i?(_=!i&&c&&!d&&a().createElement(R.A,{icon:!0,iconName:"square-arrow-up-right",iconClass:"px-2",className:"text-black flex items-center",page:o},(0,j.__)("Edit","simplybook")),r[25]=c,r[26]=d,r[27]=o,r[28]=i,r[29]=_):_=r[29],r[30]!==v||r[31]!==x||r[32]!==_?(w=a().createElement("div",{className:v},x,_),r[30]=v,r[31]=x,r[32]=_,r[33]=w):w=r[33],r[34]!==i?(E=i&&a().createElement("div",{className:"flex items-center flex-grow"},a().createElement("div",{className:"relative"},a().createElement(V.A,{className:"bg-tertiary text-white hover:bg-tertiary-light hover:text-tertiary",btnVariant:"square-small",target:"_blank",loginLink:"v2/r/payment-widget"},(0,j.__)("Upgrade","simplybook")))),r[34]=i,r[35]=E):E=r[35],r[36]!==w||r[37]!==E?(k=a().createElement(a().Fragment,null,a().createElement("div",{className:"w-full flex items-center justify-between px-4 py-5 mb-4 bg-gray-100"},w,E)),r[36]=w,r[37]=E,r[38]=k):k=r[38],k}));D.displayName="ListItem";const H=D;var B=r(9866),M=r(3042);const $=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(42),{setting:a,label:o}=e,{services:s,servicesFetched:l}=(0,T.A)(),{providers:c,providersFetched:d}=(0,B.A)();let u;r[0]===Symbol.for("react.memo_cache_sentinel")?(u=[],r[0]=u):u=r[0];const[m,v]=(0,i.useState)(u),[p,f]=(0,i.useState)(!1),[g,h]=(0,i.useState)(!1),{providersRemaining:y}=(0,M.A)();let b;r[1]!==s||r[2]!==l?(b={fetched:l,data:s,show_upsell:!1},r[1]=s,r[2]=l,r[3]=b):b=r[3];const x=y<4;let _,w;r[4]!==c||r[5]!==d||r[6]!==x?(_={fetched:d,data:c,show_upsell:x},r[4]=c,r[5]=d,r[6]=x,r[7]=_):_=r[7],r[8]!==b||r[9]!==_?(w={services:b,providers:_},r[8]=b,r[9]=_,r[10]=w):w=r[10];const E=w;let k;r[11]!==a.source||r[12]!==E?(k=()=>{v(E[a.source]?.data),f(E[a.source]?.fetched),h(E[a.source]?.show_upsell)},r[11]=a.source,r[12]=E,r[13]=k):k=r[13];const N=E[a.source];let S,C;r[14]!==N?(S=[N],r[14]=N,r[15]=S):S=r[15],(0,i.useEffect)(k,S),r[16]!==a.edit_link||r[17]!==a.link?(C=e=>a?.edit_link?.replace("{ID}",e)??a.link,r[16]=a.edit_link,r[17]=a.link,r[18]=C):C=r[18];const A=C;if(p&&!Array.isArray(m)){let e,t;return r[19]!==a.label?(e=(0,j.sprintf)((0,j.__)("No %s found."),a.label.toLowerCase()),r[19]=a.label,r[20]=e):e=r[20],r[21]!==e?(t=React.createElement(React.Fragment,null,e),r[21]=e,r[22]=t):t=r[22],t}const P=a?.premiumText??"";let O;r[23]!==P?(O={id:"upgrade",name:P,picture_preview:""},r[23]=P,r[24]=O):O=r[24];const R=O;let q,F,L,I;return r[25]!==p||r[26]!==a.label?(q=!p&&React.createElement("p",{className:"mb-4"},(0,j.sprintf)((0,j.__)("Loading %s..."),a.label.toLowerCase())),r[25]=p,r[26]=a.label,r[27]=q):q=r[27],r[28]!==A||r[29]!==o||r[30]!==m||r[31]!==p?(F=p&&m.map((e=>React.createElement(H,{upgrade:!1,key:e.id+e.source,label:o,link:A(e.id),item:e}))),r[28]=A,r[29]=o,r[30]=m,r[31]=p,r[32]=F):F=r[32],r[33]!==o||r[34]!==R||r[35]!==d||r[36]!==g?(L=d&&g&&React.createElement(H,{upgrade:!0,label:o,link:"v2/r/payment-widget",item:R}),r[33]=o,r[34]=R,r[35]=d,r[36]=g,r[37]=L):L=r[37],r[38]!==q||r[39]!==F||r[40]!==L?(I=React.createElement("div",{className:"w-full"},q,F,L),r[38]=q,r[39]=F,r[40]=L,r[41]=I):I=r[41],I}));$.displayName="ListField";const K=$;var Q=function(e){var t=e.id,r=e.label,n=e.colors,o=e.onChange,s=e.value,c=e.setShowPreview,d=a().useState(n),u=d[0],m=d[1],v=(0,P.A)(),p=v.getValue,f=v.setValue,g=v.settings;return v.saveSettings,v.invalidateSettings,(0,i.useEffect)((function(){if("custom"===t){var e=[];e.push(p("sb_base_color")),e.push(p("btn_color_1")),e.push(p("body_bg_color")),e.push(p("light_font_color")),e.push(p("dark_font_color")),m(e)}}),[g]),console.log("value ",s),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"pb-1 font-medium text-black text-md ",children:r}),(0,l.jsxs)("div",{className:"flex space-x-2 pb-4",children:[(0,l.jsx)("div",{className:"border border-gray-300 p-2 gap-2 flex cursor-pointer",onClick:function(e){return console.log(t),void(o&&t&&("custom"!==t&&Array.isArray(n)&&Object.entries({sb_base_color:0,booking_nav_bg_color:0,btn_color_1:1,body_bg_color:2,light_font_color:3,dark_font_color:4}).forEach((function(e){var t=e[0],r=e[1];n&&n.hasOwnProperty(r)&&(console.log("set color",t,n[r],"of index",r),f(t,n[r]))})),console.log("palettes",t,"value",s),f("palette",t),o(t)))},children:null==u?void 0:u.map((function(e,t){return(0,l.jsx)("div",{style:{backgroundColor:e},className:"w-20 h-6 border border-gray-300"},t)}))}),(0,l.jsxs)("div",{className:"flex items-center space-x-2 cursor-pointer",onClick:function(e){return c&&c(!0)},children:[(0,l.jsx)(U.A,{name:"eye"}),(0,l.jsx)("span",{children:s===t?(0,j.__)("live","simplybook"):(0,j.__)("preview","simplybook")})]})]})]})};Q.displayName="PaletteInput";const z=Q;var W=r(4705);const G=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(29);let o,s,l,c,d,u,m;r[0]!==e?(({setting:m,fieldState:l,label:d,help:c,context:s,className:o,...u}=e),r[0]=e,r[1]=o,r[2]=s,r[3]=l,r[4]=c,r[5]=d,r[6]=u,r[7]=m):(o=r[1],s=r[2],l=r[3],c=r[4],d=r[5],u=r[6],m=r[7]);const v=m.id,[p,f]=(0,i.useState)(!1),g=(0,i.useRef)(null);let h,y;r[8]===Symbol.for("react.memo_cache_sentinel")?(h=()=>{const e=e=>{g.current&&!g.current.contains(e.target)&&f&&f(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},y=[f],r[8]=h,r[9]=y):(h=r[8],y=r[9]),(0,i.useEffect)(h,y);const b=l?.error?.message,x=o+" relative",w=u.required;let E,k,N;if(r[10]!==u.onChange||r[11]!==u.value||r[12]!==m.options){let e;r[14]!==u.onChange||r[15]!==u.value?(e=(e,t)=>a().createElement(z,{key:t,id:e.id,label:e.label,colors:e.colors,onChange:u?.onChange,value:u?.value,setShowPreview:f}),r[14]=u.onChange,r[15]=u.value,r[16]=e):e=r[16],E=m.options.map(e),r[10]=u.onChange,r[11]=u.value,r[12]=m.options,r[13]=E}else E=r[13];return r[17]!==p?(k=p&&a().createElement("div",{ref:g,style:{right:"-200px"},className:"absolute top-0"},a().createElement(W.A,null)),r[17]=p,r[18]=k):k=r[18],r[19]!==s||r[20]!==c||r[21]!==v||r[22]!==d||r[23]!==u.required||r[24]!==b||r[25]!==x||r[26]!==E||r[27]!==k?(N=a().createElement(_.A,{label:d,help:c,error:b,context:s,className:x,inputId:v,required:w},E,k),r[19]=s,r[20]=c,r[21]=v,r[22]=d,r[23]=u.required,r[24]=b,r[25]=x,r[26]=E,r[27]=k,r[28]=N):N=r[28],N}));G.displayName="PalettesField";const J=G;var X=r(359);function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Y.apply(null,arguments)}r(332);const Z=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(26);let i,a,o,s,l,c;if(r[0]!==e){const{setting:t,fieldState:n,label:d,help:u,context:m,className:v,...p}=e;c=t,o=n,s=d,a=m,i=v,l=p,r[0]=e,r[1]=i,r[2]=a,r[3]=o,r[4]=s,r[5]=l,r[6]=c}else i=r[1],a=r[2],o=r[3],s=r[4],l=r[5],c=r[6];const d=c.id;let u;if(r[7]===Symbol.for("react.memo_cache_sentinel")){const e=new L.A("logout");u=async t=>{t.preventDefault();const r=window.confirm(sprintf((0,j.__)("Are you sure you want to logout?%1$sAll settings will be lost.%2$sYou need to reset your booking page(s) manually.","simplybook"),"\n\n- ","\n- "));if(r){try{await e.setPayload({user_confirmed:r}).post()}catch(e){const t=e;return void console.error("Logout request failed",t)}window.location.assign(simplybook.dashboard_url)}},r[7]=u}else u=r[7];const m=u,v=l.tooltip,p=l.required,f=!!o?.error?.message;let g;r[8]!==d||r[9]!==l||r[10]!==f?(g=React.createElement(X.A,Y({className:"mb-4",id:d,type:"text","aria-invalid":f},l)),r[8]=d,r[9]=l,r[10]=f,r[11]=g):g=r[11];const h=!!o?.error?.message;let y,b,x,w;return r[12]===Symbol.for("react.memo_cache_sentinel")?(y=(0,j.__)("Log out","simplybook"),r[12]=y):y=r[12],r[13]===Symbol.for("react.memo_cache_sentinel")?(b=(0,j.__)("Log out","simplybook"),r[13]=b):b=r[13],r[14]!==d||r[15]!==h?(x=React.createElement(V.A,{id:d,btnVariant:"tertiary-small","aria-invalid":h,label:y,onClick:m},b),r[14]=d,r[15]=h,r[16]=x):x=r[16],r[17]!==i||r[18]!==a||r[19]!==d||r[20]!==s||r[21]!==l.required||r[22]!==l.tooltip||r[23]!==g||r[24]!==x?(w=React.createElement(_.A,{label:s,tooltip:v,context:a,className:i,inputId:d,required:p},g,x),r[17]=i,r[18]=a,r[19]=d,r[20]=s,r[21]=l.required,r[22]=l.tooltip,r[23]=g,r[24]=x,r[25]=w):w=r[25],w}));Z.displayName="AuthenticationField";const ee=Z;function te(){return te=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},te.apply(null,arguments)}const re=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(7),{control:i,item:a}=e,s=`theme_settings.${a.config_key}`;let l,c;return r[0]!==a?(l=e=>{const{field:t,fieldState:r}=e;return 0==a.is_visible||0==a.widget_support?null:"checkbox"===a.config_type?React.createElement(k,te({},t,{fieldState:r,setting:a,label:a.config_title,className:"theme-config-field"})):a.config_type.includes("color")?React.createElement(C.A,te({},t,{fieldState:r,setting:a,label:a.config_title,className:"theme-config-field"})):"select"===a.config_type?React.createElement(N.A,te({},t,{fieldState:r,setting:a,label:a.config_title,options:a.values,className:"theme-config-field"})):null},r[0]=a,r[1]=l):l=r[1],r[2]!==i||r[3]!==a.default_value||r[4]!==s||r[5]!==l?(c=React.createElement(o.xI,{control:i,name:s,defaultValue:a.default_value,render:l}),r[2]=i,r[3]=a.default_value,r[4]=s,r[5]=l,r[6]=c):c=r[6],c})),ne=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(14),{control:i,parentSetting:a,selectedTheme:o}=e;let s;r[0]===Symbol.for("react.memo_cache_sentinel")?(s={checkbox:10,select:9,color:8},r[0]=s):s=r[0];const l=s;let c,d,u;if(r[1]!==i||r[2]!==a?.translations||r[3]!==o?.config){let e;r[6]!==a?.translations?(e=(e,t)=>{const[,r]=t;if(0==r.is_visible||0==r.widget_support)return e;const n={...r};return["color","gradient"].some((e=>n.config_type.includes(e)))&&(n.config_type="color"),e[n.config_type]||(e[n.config_type]=[]),"select"===n.config_type&&(n.values=Object.entries(n.values).map((e=>{const[t,r]=e;return{key:t,value:r,label:String(a?.translations?.[r]??r)}}))),n.config_title?n.config_title=a?.translations[n.config_title]??n.config_title:n.config_title=a?.translations[n.config_key]??n.config_key,e[n.config_type].push(n),e},r[6]=a?.translations,r[7]=e):e=r[7];const t=Object.entries(o?.config).reduce(e,{});let n;r[8]===Symbol.for("react.memo_cache_sentinel")?(n=(e,t)=>{const[r]=e,[n]=t;return(l[n]??0)-(l[r]??0)},r[8]=n):n=r[8];const s=Object.entries(t).sort(n);let u;c="theme-config",r[9]!==i?(u=e=>{const[t,r]=e;return React.createElement("div",{key:t,className:`theme-config-group theme-config-group-${t}`},r.map((e=>React.createElement(re,{key:e.config_key,control:i,item:e}))))},r[9]=i,r[10]=u):u=r[10],d=s.map(u),r[1]=i,r[2]=a?.translations,r[3]=o?.config,r[4]=c,r[5]=d}else c=r[4],d=r[5];return r[11]!==c||r[12]!==d?(u=React.createElement("div",{className:c},d),r[11]=c,r[12]=d,r[13]=u):u=r[13],u}));function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ie.apply(null,arguments)}const ae=(0,i.forwardRef)(((e,t)=>{const r=(0,n.c)(25);let i,s;if(r[0]!==e){const{control:t,reset:n,...a}=e;i=t,s=a,r[0]=e,r[1]=i,r[2]=s}else i=r[1],s=r[2];const{onboardingCompleted:l}=(0,F.A)();let c;r[3]===Symbol.for("react.memo_cache_sentinel")?(c=new L.A("theme_list"),r[3]=c):c=r[3];const d=c;let u,m;r[4]===Symbol.for("react.memo_cache_sentinel")?(u=["theme_list"],m=()=>d.get(),r[4]=u,r[5]=m):(u=r[4],m=r[5]);const v=!!l;let p;r[6]!==v?(p={queryKey:u,queryFn:m,staleTime:36e5,retry:0,enabled:v},r[6]=v,r[7]=p):p=r[7];const{isLoading:f,error:g,data:h}=(0,q.I)(p);let y,b;null!==g&&console.error("Error fetching domain data:",g.message),r[8]!==h?.data?(b=h?.data?.map(se)??[],r[8]=h?.data,r[9]=b):b=r[9],y=b;const x=y;let _;r[10]!==h?.data?(_=e=>h?.data?.find((t=>t.name===e)),r[10]=h?.data,r[11]=_):_=r[11];const w=_;let E,k,S;return r[12]!==g?(E=g&&a().createElement("div",{className:"error-message"},(0,j.__)("Error fetching theme settings. Please try again later.","simplybook")),r[12]=g,r[13]=E):E=r[13],r[14]!==i||r[15]!==g||r[16]!==w||r[17]!==f||r[18]!==x||r[19]!==s?.setting||r[20]!==h?.data?(k=!f&&!g&&h?.data&&a().createElement(o.xI,{control:i,name:s?.setting?.id,defaultValue:s?.setting?.value??s?.setting?.default??"",render:e=>{const{field:t,fieldState:r}=e,n=w(t.value);return a().createElement(a().Fragment,null,a().createElement(N.A,ie({},t,{setting:s?.setting,options:x,label:s?.setting?.label,help:s?.setting?.help,required:s?.setting?.required,disabled:f,fieldState:r,className:"w-full",onChange:e=>{t.onChange(e.target.value)}})),n?.config&&a().createElement(ne,{control:i,parentSetting:s?.setting,selectedTheme:n}))}}),r[14]=i,r[15]=g,r[16]=w,r[17]=f,r[18]=x,r[19]=s?.setting,r[20]=h?.data,r[21]=k):k=r[21],r[22]!==k||r[23]!==E?(S=a().createElement(a().Fragment,null,E,k),r[22]=k,r[23]=E,r[24]=S):S=r[24],S}));ae.displayName="ThemeField";const oe=ae;function se(e){return{label:e.title.charAt(0).toUpperCase()+e.title.slice(1),value:e.name,key:e.id}}var le=r(982),ce=r(6188),de=r(9964),ue=function(){return ue=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ue.apply(this,arguments)};const me=function(e){var t=e.providerId,r=e.provider;if(!r)return(0,l.jsxs)("div",{className:"text-gray-500",children:[(0,j.__)("Loading","simplybook"),"..."]});var n=(0,de.r)(),a=n.crudState,o=n.dispatch,s=(0,i.useState)(r),c=s[0],d=s[1];(0,i.useEffect)((function(){var e,n=null===(e=a.unsavedProviders)||void 0===e?void 0:e.find((function(e){return e.id===t}));d(null!=n?n:r)}),[]),(0,i.useEffect)((function(){a.providerErrors&&a.providerErrors[t]&&!a.providersHasUnsavedChanges&&o({dispatchType:"clearAllErrorsForItem",change:{item:{id:t}}})}),[a.providerErrors,a.providersHasUnsavedChanges]);var u=function(e,r){var n,i,s=((n={id:t})[e]="qty"===e&&""!==r?Number(r):r,n),l=a.providerErrors?a.providerErrors[t]:{};!!l&&Object.keys(l).includes(e)&&o({dispatchType:"clearErrorsForField",change:{item:(i={id:t},i[e]="",i)}}),a.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),d((function(e){return ue(ue({},e),s)})),o({dispatchType:"unsavedChangesToProviders",change:{item:s}})},m=function(e,r){var n,i,s,l,c=!1;switch(e){case"name":c=""!==r,l=[(0,j.__)("Name is a required field.","simplybook")];break;case"email":c=/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r)||""===r,l=[(0,j.__)("Please enter a valid email address (e.g., example@domain.com)","simplybook")];break;case"phone":c=/^((\(\+|00\))|(\+|00))[1-9][0-9 \-\(\)\.]{7,32}$/.test(r)||""===r,l=[(0,j.__)("Please enter a valid phone number with country code (e.g., +31 123 456 789)","simplybook")];break;case"qty":var d=Number(r);c=!isNaN(d)&&!(d>99||0===d),d>99||(l=[(0,j.__)("Please enter a valid number between 1 and 99","simplybook")])}if(!c&&l){var u=((n={})[e]=l,n);o({dispatchType:"errorsOnFields",change:{providerErrors:(i={},i[t]=ue({},u),i)}})}else a.providerErrors&&a.providerErrors[t]&&o({dispatchType:"clearErrorsForField",change:{item:(s={id:t},s[e]="",s)}});return c};return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-name",children:[(0,j.__)("Service provider name","simplybook")," *"]}),(0,l.jsx)("input",{id:"provider-name",type:"text",value:c.name,onChange:function(e){return u("name",e.target.value)},className:(0,f.A)("input-base-no-shadow",a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].name&&"ring-2 ring-red-600":null),required:!0,onBlur:function(e){m("name",e.target.value.trim())}}),a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].name&&(0,l.jsx)("div",{children:a.providerErrors[t].name.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsx)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-email",children:(0,j.__)("E-mail","simplybook")}),(0,l.jsx)("input",{id:"provider-email",type:"email",value:c.email,onChange:function(e){return u("email",e.target.value)},onBlur:function(e){m("email",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].email&&"ring-2 ring-red-600":null)}),a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].email&&(0,l.jsx)("div",{children:a.providerErrors[t].email.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsx)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-phone",children:(0,j.__)("Phone","simplybook")}),(0,l.jsx)("input",{id:"provider-phone",type:"tel",value:c.phone,onChange:function(e){return u("phone",e.target.value)},pattern:"[+]?[0-9\\s\\-\\(\\)]{7,20}",title:(0,j.__)("Please enter a valid phone number with country code (e.g., +31 123 456 789)","simplybook"),className:(0,f.A)("input-base-no-shadow",a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].phone&&"ring-2 ring-red-600":null),placeholder:"+31 123 456 789",onBlur:function(e){m("phone",e.target.value.trim())}}),a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].phone&&(0,l.jsx)("div",{children:a.providerErrors[t].phone.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"provider-qty",children:[(0,j.__)("How many clients can be served at the same time?","simplybook")," *"]}),(0,l.jsx)("input",{id:"provider-qty",type:"text",pattern:"[0-9]",placeholder:"1",value:c.qty,required:!0,onChange:function(e){var r,n=e.target.value.trim();if((""===n||m("qty",n))&&u("qty",n),""===n){var i={qty:[(0,j.__)("Please enter a valid number between 1 and 99","simplybook")]};o({dispatchType:"errorsOnFields",change:{providerErrors:(r={},r[t]=ue({},i),r)}})}},onBlur:function(e){m("qty",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].qty&&"ring-2 ring-red-600":null)}),a.providerErrors&&a.providerErrors[t]?a.providerErrors[t].qty&&(0,l.jsx)("div",{children:a.providerErrors[t].qty.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),t&&"new"!==t&&(0,l.jsx)("div",{className:"mt-4 max-w-fit",children:(0,l.jsx)(V.A,{className:"!border-sb-blue !text-sb-blue flex-row-reverse",icon:!0,iconName:"target-blank",iconClass:"fa-regular",reverseIcon:!0,btnVariant:"square-ghost-small",loginLink:"/v2/management/#providers/edit/details/".concat(t),children:(0,j.__)("Edit All Properties","simplybook")})})]})},ve=function(e){var t,r=e.provider,n=e.providers,a=(0,de.r)(),o=a.crudState,s=a.dispatch,c=a.handleDeletingItem,d=I().domain,u=(0,i.useState)(!1),m=u[0],v=u[1],p=(0,i.useState)(!1),g=p[0],h=p[1],y=(0,i.useState)(!1),b=y[0],x=y[1],_=(0,i.useState)(n.length<=1),w=_[0],E=_[1],k=(0,i.useState)(!1),N=k[0],S=k[1],C=r.picture_preview&&r.picture_preview.length>0;(0,i.useEffect)((function(){var e,t=null===(e=o.currentlyVisibleProviders)||void 0===e?void 0:e.includes(r.id);h(null!=t?t:!!r.is_visible)}),[]),(0,i.useEffect)((function(){var e,t,n=null===(e=o.providers)||void 0===e?void 0:e.every((function(e){return r.id===e.id})),i=o.currentlyVisibleProviders.every((function(e){return r.id===e}));i!=b&&x(i);var a=null===(t=o.providers)||void 0===t?void 0:t.filter((function(e){return e.is_visible})).every((function(e){return r.id===e.id})),s=null!=a&&null!=n&&(a||i||n);s!=w&&E(s);var l=o.currentlyVisibleProviders.includes(r.id);l!=g&&h(l)}),[o]),(0,i.useEffect)((function(){var e=o.providerErrors?o.providerErrors[r.id]:null;e&&!m&&v(!0),S(!!e)}),[o.providerErrors]);var A=function(){v(!m)};return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-4 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-t-lg gap-2",onClick:function(){N||A()},children:[(0,l.jsxs)("div",{className:"flex space-x-3 flex-1 max-w-3/5",children:[C?(0,l.jsx)("img",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full",src:d+r.picture_preview,alt:"..."}):(0,l.jsx)("div",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full font-bold",children:null===(t=r.name)||void 0===t?void 0:t.charAt(0).toUpperCase()}),(0,l.jsx)("div",{className:"flex items-center flex-1 max-w-2/3",children:(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:r.name})})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:function(e){e.stopPropagation(),c(r.id)},disabled:o.isLoading||w,className:"text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50 p-1 rounded cursor-pointer disabled:cursor-not-allowed flex items-center h-6",title:w?(0,j.__)("Cannot delete the only visible service provider","simplybook"):(0,j.__)("Delete Service Provider","simplybook"),children:(0,l.jsx)(le.g,{icon:ce.yLS,className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"mt-[1px]",onClick:function(e){return e.stopPropagation()},children:(0,l.jsxs)("label",{className:(0,f.A)("relative inline-flex items-center mb-0",b?"cursor-not-allowed":"cursor-pointer"),title:b?(0,j.__)("Cannot hide the only visible service provider","simplybook"):g?(0,j.__)("Visible","simplybook"):(0,j.__)("Hidden","simplybook"),children:[(0,l.jsx)("input",{type:"checkbox",checked:g,onChange:function(e){e.stopPropagation(),s({dispatchType:"unsavedChangesToProviders",change:{item:{id:r.id,is_visible:e.target.checked}}}),h(e.target.checked)},disabled:b,className:"sr-only peer"}),(0,l.jsx)("div",{className:(0,f.A)("w-8 h-[18px] bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer","peer-checked:bg-blue-600 peer-checked:after:translate-x-[0.8rem] peer-checked:after:border-white","after:content-[''] after:mx-[0.2rem] flex items-center after:left-0.5 after:bg-white after:border-gray-200","after:border after:rounded-full after:aspect-square after:h-3 after:w-3 after:transition-all",b&&"opacity-50 cursor-not-allowed")})]})}),(0,l.jsx)("button",{type:"button",disabled:N,onClick:function(e){e.stopPropagation(),A()},className:(0,f.A)("px-1 rounded text-gray-500 active:ring-4 focus:ring-4 active:ring-blue-300 focus:ring-blue-300 hover:bg-gray-200 transition-transform duration-200 cursor-pointer flex items-center h-6",N&&"pointer-events-none opacity-50 cursor-not-allowed"),title:m?(0,j.__)("Collapse","simplybook"):(0,j.__)("Expand","simplybook"),children:(0,l.jsx)(le.g,{icon:ce.Jt$,className:(0,f.A)("w-4 h-4 self-start mt-1 transition-transform duration-200",m&&"rotate-180")})})]})]}),m&&(0,l.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg",children:(0,l.jsx)(me,{provider:r,providerId:r.id})})]})};var pe=r(8908),fe=r(5959);function ge(e){return null!=e}var he=function(){return he=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},he.apply(this,arguments)};const ye=function(e){var t=e.serviceId,r=e.service;if(!r)return(0,l.jsxs)("div",{className:"text-gray-500",children:[(0,j.__)("Loading","simplybook"),"..."]});var n=(0,de.r)(),a=n.crudState,o=n.dispatch,s=(0,i.useState)(r),c=s[0],d=s[1];(0,i.useEffect)((function(){var e,n=null===(e=a.unsavedServices)||void 0===e?void 0:e.find((function(e){return e.id===t}));d(null!=n?n:r)}),[]),(0,i.useEffect)((function(){a.serviceErrors&&a.serviceErrors[t]&&!a.servicesHasUnsavedChanges&&o({dispatchType:"clearAllErrorsForItem",change:{item:{id:t}}})}),[a.serviceErrors,a.servicesHasUnsavedChanges]);var u=function(e,r){var n,i,s=((n={id:t})[e]="duration"===e&&""!==r?Number(r):r,n),l=a.serviceErrors?a.serviceErrors[t]:{};!!l&&Object.keys(l).includes(e)&&o({dispatchType:"clearErrorsForField",change:{item:(i={id:t},i[e]="",i)}}),a.generalError&&o({dispatchType:"generalError",change:{generalError:""}}),d((function(e){return he(he({},e),s)})),o({dispatchType:"unsavedChangesToServices",change:{item:s}})},m=function(e,r){var n,i,s,l,c=!1;switch(e){case"name":c=""!==r,l=[(0,j.__)("Name is a required field.","simplybook")];break;case"duration":var d=Number(r);c=!isNaN(d)&&0!==d,l=[(0,j.__)("Please enter a valid number that is a multiple of your selected timeframe","simplybook")]}if(!c&&l){var u=((n={})[e]=l,n);o({dispatchType:"errorsOnFields",change:{serviceErrors:(i={},i[t]=he({},u),i)}})}else a.serviceErrors&&a.serviceErrors[t]&&o({dispatchType:"clearErrorsForField",change:{item:(s={id:t},s[e]="",s)}});return c};return(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"service-name",children:[(0,j.__)("Service name","simplybook")," *"]}),(0,l.jsx)("input",{id:"service-name",type:"text",value:c.name,onChange:function(e){return u("name",e.target.value)},className:(0,f.A)("input-base-no-shadow",a.serviceErrors&&a.serviceErrors[t]?a.serviceErrors[t].name&&"ring-2 ring-red-600":null),required:!0,onBlur:function(e){m("name",e.target.value.trim())}}),a.serviceErrors&&a.serviceErrors[t]?a.serviceErrors[t].name&&(0,l.jsx)("div",{children:a.serviceErrors[t].name.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),(0,l.jsxs)("div",{className:"col-span-full",children:[(0,l.jsxs)("label",{className:"cursor-pointer pb-1 font-medium text-black text-label block",htmlFor:"service-duration",children:[(0,j.__)("Service duration (minutes)","simplybook")," *"]}),(0,l.jsx)("input",{id:"service-duration",type:"text",pattern:"[0-9]",placeholder:"60",value:c.duration,required:!0,onChange:function(e){var r,n=e.target.value.trim();if((""===n||m("duration",n))&&u("duration",n),""===n){var i={duration:[(0,j.__)("Please enter a valid number that is a multiple of your selected timeframe","simplybook")]};o({dispatchType:"errorsOnFields",change:{serviceErrors:(r={},r[t]=he({},i),r)}})}},onBlur:function(e){m("duration",e.target.value.trim())},className:(0,f.A)("input-base-no-shadow",a.serviceErrors&&a.serviceErrors[t]?a.serviceErrors[t].duration&&"ring-2 ring-red-600":null)}),a.serviceErrors&&a.serviceErrors[t]?a.serviceErrors[t].duration&&(0,l.jsx)("div",{children:a.serviceErrors[t].duration.map((function(e){return(0,l.jsx)("span",{className:"font-medium text-red-600 ml-[1px] block mt-1",children:e})}))}):null]}),t&&"new"!==t&&(0,l.jsx)("div",{className:"mt-4 max-w-fit",children:(0,l.jsx)(V.A,{className:"!border-sb-blue !text-sb-blue flex-row-reverse",icon:!0,iconName:"target-blank",iconClass:"fa-regular",reverseIcon:!0,btnVariant:"square-ghost-small",loginLink:"/v2/management/#services/edit/details/".concat(t),children:(0,j.__)("Edit All Properties","simplybook")})})]})},be=function(e){var t,r=e.service,n=e.services,a=e.isLoading,o=(0,de.r)(),s=o.crudState,c=o.dispatch,d=o.handleDeletingItem,u=I().domain,m=(0,i.useState)(!1),v=m[0],p=m[1],g=(0,i.useState)(!1),h=g[0],y=g[1],b=(0,i.useState)(!1),x=b[0],_=b[1],w=(0,i.useState)(n.length<=1),E=w[0],k=w[1],N=(0,i.useState)(!1),S=N[0],C=N[1],A=r.picture_preview&&r.picture_preview.length>0;(0,i.useEffect)((function(){var e=s.currentlyVisibleServices.includes(r.id);y(null!=e?e:!!r.is_visible)}),[]),(0,i.useEffect)((function(){var e,t,n=null===(e=s.services)||void 0===e?void 0:e.every((function(e){return r.id===e.id})),i=s.currentlyVisibleServices.every((function(e){return r.id===e}));i!=x&&_(i);var a=null===(t=s.services)||void 0===t?void 0:t.filter((function(e){return e.is_visible})).every((function(e){return r.id===e.id})),o=null!=a&&null!=n&&(a||i||n);o!=E&&k(o);var l=s.currentlyVisibleServices.includes(r.id);l!=h&&y(l)}),[s]),(0,i.useEffect)((function(){var e=s.serviceErrors?s.serviceErrors[r.id]:null;e&&p(!0),C(!!e)}),[s.serviceErrors]);var P=function(){p(!v)};return(0,l.jsxs)("div",{className:"border border-gray-200 rounded-lg mb-4 bg-gray-50",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 rounded-t-lg  gap-2",onClick:function(){S||P()},children:[(0,l.jsxs)("div",{className:"flex space-x-3 flex-1 max-w-3/5",children:[A?(0,l.jsx)("img",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full",src:u+r.picture_preview,alt:"..."}):(0,l.jsx)("div",{className:"w-20 h-20 min-w-[36px] max-w-[36px] max-h-[36px] bg-blue-100 text-xs flex items-center justify-center overflow-hidden rounded-full font-bold",children:null===(t=r.name)||void 0===t?void 0:t.charAt(0).toUpperCase()}),(0,l.jsx)("div",{className:"flex items-center flex-1 max-w-2/3",children:(0,l.jsx)("div",{className:"text-sm font-medium text-gray-900 truncate",children:r.name})})]}),(0,l.jsxs)("div",{className:"flex space-x-3",children:[(0,l.jsx)("button",{type:"button",onClick:function(e){e.stopPropagation(),d(r.id)},disabled:a||E,className:"text-gray-500 hover:text-red-600 hover:bg-red-100 disabled:opacity-50 p-1 cursor-pointer disabled:cursor-not-allowed flex items-center h-6",title:E?(0,j.__)("Cannot delete the only visible service","simplybook"):(0,j.__)("Delete Service","simplybook"),children:(0,l.jsx)(le.g,{icon:ce.yLS,className:"w-4 h-4"})}),(0,l.jsx)("div",{className:"mt-[1px]",onClick:function(e){return e.stopPropagation()},children:(0,l.jsxs)("label",{className:(0,f.A)("relative inline-flex items-center mb-0",x?"cursor-not-allowed":"cursor-pointer"),title:x?(0,j.__)("Cannot hide the last visible service","simplybook"):h?(0,j.__)("Visible","simplybook"):(0,j.__)("Hidden","simplybook"),children:[(0,l.jsx)("input",{type:"checkbox",checked:h,onChange:function(e){e.stopPropagation(),c({dispatchType:"unsavedChangesToServices",change:{item:{id:r.id,is_visible:e.target.checked}}}),y(e.target.checked)},disabled:x,className:"sr-only peer"}),(0,l.jsx)("div",{className:(0,f.A)("w-8 h-[18px] bg-gray-300 peer-focus:ring-2 peer-focus:ring-blue-300 rounded-full peer","peer-checked:bg-blue-600 peer-checked:after:translate-x-[0.8rem] peer-checked:after:border-white","after:content-[''] after:mx-[0.2rem] flex items-center after:left-0.5 after:bg-white after:border-gray-200","after:border after:rounded-full after:aspect-square after:h-3 after:w-3 after:transition-all",x&&"opacity-50 cursor-not-allowed")})]})}),(0,l.jsx)("button",{type:"button",disabled:S,onClick:function(e){e.stopPropagation(),P()},className:(0,f.A)("px-1 rounded text-gray-500 active:ring-4 focus:ring-4 active:ring-blue-300 focus:ring-blue-300 hover:bg-gray-200 transition-transform duration-200 cursor-pointer flex items-center h-6",S&&"pointer-events-none opacity-50 cursor-not-allowed"),title:v?(0,j.__)("Collapse","simplybook"):(0,j.__)("Expand","simplybook"),children:(0,l.jsx)(le.g,{icon:ce.Jt$,className:(0,f.A)("w-4 h-4 self-start mt-1 transition-transform duration-200",v&&"rotate-180")})})]})]}),v&&(0,l.jsx)("div",{className:"border-t border-gray-200 p-4 bg-gray-50 rounded-b-lg",children:(0,l.jsx)(ye,{service:r,serviceId:r.id})})]})};function xe(e){return null!=e}function _e(){return _e=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_e.apply(null,arguments)}const we={text:s.A,textarea:s.A,number:s.A,api:s.A,hidden:p,checkbox:k,select:N.A,colorpicker:C.A,implementation:e=>{const t=(0,n.c)(16);let r,i,a,o;t[0]!==e?(({options:i,value:o,onChange:r,...a}=e),t[0]=e,t[1]=r,t[2]=i,t[3]=a,t[4]=o):(r=t[1],i=t[2],a=t[3],o=t[4]);const s=a.setting&&a.setting.default?a.setting.default:"",l=o||s,{setValue:c}=(0,P.A)();let d;t[5]!==r||t[6]!==a.setting.id||t[7]!==c?(d=async e=>{await c(a.setting.id,e),r(e)},t[5]=r,t[6]=a.setting.id,t[7]=c,t[8]=d):d=t[8];const u=d;let m,v;return t[9]!==u?(m=e=>u(e),t[9]=u,t[10]=m):m=t[10],t[11]!==l||t[12]!==i||t[13]!==a||t[14]!==m?(v=React.createElement("div",{className:"w-full mb-8"},React.createElement(A,O({options:i,value:l,onChange:m},a))),t[11]=l,t[12]=i,t[13]=a,t[14]=m,t[15]=v):v=t[15],v},list:K,palettes:J,authentication:ee,theme:oe,providers_list:()=>{const e=(0,n.c)(31),{crudState:t,dispatch:r}=(0,de.r)(),{providersRemaining:o,providersTotal:s}=(0,M.A)(),[l,c]=(0,i.useState)(s-o);let d,u,m;e[0]!==t.providers?(d=()=>{t.providers&&c(t.providers.length)},u=[t.providers],e[0]=t.providers,e[1]=d,e[2]=u):(d=e[1],u=e[2]),(0,i.useEffect)(d,u),e[3]!==t.unsavedProviders||e[4]!==t.unsavedServices.length?(m=e=>{const{next:r}=e,n=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;return!(r.pathname.includes("settings")||!n)&&!window.confirm((0,j.__)("You have unsaved changes. Are you sure you want to leave?\n\nYour changes will be lost.","simplybook"))},e[3]=t.unsavedProviders,e[4]=t.unsavedServices.length,e[5]=m):m=e[5];const v=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;let p,f;e[6]!==m||e[7]!==v?(p={shouldBlockFn:m,enableBeforeUnload:v},e[6]=m,e[7]=v,e[8]=p):p=e[8],(0,fe.K)(p),e[9]!==r?(f=()=>{r({dispatchType:"createNewCanceled"}),r({dispatchType:"clearAllErrorsForItem",change:{item:{id:"new"}}})},e[9]=r,e[10]=f):f=e[10];const g=f;let h;e[11]===Symbol.for("react.memo_cache_sentinel")?(h={id:"new",name:"",email:"",phone:"",qty:1},e[11]=h):h=e[11];const y=h;let b;e[12]!==r?(b=()=>{r({dispatchType:"isCreatingNewChanged",change:{isCreatingNewProvider:!0}}),r({dispatchType:"unsavedChangesToProviders",change:{item:y}})},e[12]=r,e[13]=b):b=e[13];const x=b;if(!t.providers||t.isLoading){let t,r;return e[14]===Symbol.for("react.memo_cache_sentinel")?(t=a().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e[14]=t):t=e[14],e[15]===Symbol.for("react.memo_cache_sentinel")?(r=a().createElement("div",{className:"flex items-center justify-center p-8"},t,a().createElement("span",{className:"ml-2"},(0,j.__)("Loading service providers","simplybook"),"...")),e[15]=r):r=e[15],r}let _,w,E;return e[16]!==t.isLoading||e[17]!==t.providers||e[18]!==o?(_=!t.isLoading&&t.providers&&0===t.providers.length?a().createElement("div",{className:"text-center py-8 text-gray-500"},(0,j.__)("No service providers found.","simplybook")+(o>0?(0,j.__)('Click "Add Service Provider" to create your first service provider.',"simplybook"):"")):a().createElement("div",{className:"space-y-6"},t.providers?.filter(ge).map((e=>a().createElement(ve,{key:e.id,provider:e,providers:t.providers})))),e[16]=t.isLoading,e[17]=t.providers,e[18]=o,e[19]=_):_=e[19],e[20]!==t.isCreatingNewProvider||e[21]!==t.isSaving||e[22]!==x||e[23]!==g||e[24]!==l||e[25]!==o||e[26]!==s?(w=o>0&&a().createElement(a().Fragment,null,a().createElement("div",{className:"flex justify-between items-center mb-4"},a().createElement("div",{className:"flex items-center gap-3"},a().createElement(pe.A,{type:"button",className:"font-bold border-secondary bg-secondary text-white",onClick:t.isCreatingNewProvider?g:x,disabled:t.isSaving,btnVariant:"square"},a().createElement(le.g,{icon:ce.QLR,className:"w-4 h-4 mr-2 text-white font-bold"}),t.isCreatingNewProvider?(0,j.__)("Cancel New Service Provider","simplybook"):(0,j.__)("Add Service Provider","simplybook"))),a().createElement("div",{className:"rounded-md px-2 py-1 text-tertiary font-bold bg-blue-100"},a().createElement("span",null,`Providers: ${l} / ${s}`))),t.isCreatingNewProvider&&a().createElement("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50"},a().createElement("h4",{className:"text-md font-medium mb-4"},(0,j.__)("Add New Service Provider","simplybook")),a().createElement(me,{providerId:"new",provider:y}))),e[20]=t.isCreatingNewProvider,e[21]=t.isSaving,e[22]=x,e[23]=g,e[24]=l,e[25]=o,e[26]=s,e[27]=w):w=e[27],e[28]!==_||e[29]!==w?(E=a().createElement("div",{className:"w-full"},_,w),e[28]=_,e[29]=w,e[30]=E):E=e[30],E},services_list:()=>{const e=(0,n.c)(29),{crudState:t,dispatch:r}=(0,de.r)();let i;e[0]!==t.unsavedProviders||e[1]!==t.unsavedServices.length?(i=e=>{const{next:r}=e,n=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;return!(r.pathname.includes("settings")||!n)&&!window.confirm((0,j.__)("You have unsaved changes. Are you sure you want to leave?\n\nYour changes will be lost.","simplybook"))},e[0]=t.unsavedProviders,e[1]=t.unsavedServices.length,e[2]=i):i=e[2];const o=0!==t.unsavedServices.length||0!==t.unsavedProviders.length;let s,l;e[3]!==i||e[4]!==o?(s={shouldBlockFn:i,enableBeforeUnload:o},e[3]=i,e[4]=o,e[5]=s):s=e[5],(0,fe.K)(s),e[6]!==r?(l=()=>{r({dispatchType:"createNewCanceled"}),r({dispatchType:"clearAllErrorsForItem",change:{item:{id:"new"}}})},e[6]=r,e[7]=l):l=e[7];const c=l;let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d={id:"new",name:"",duration:60},e[8]=d):d=e[8];const u=d;let m;e[9]!==r?(m=()=>{r({dispatchType:"isCreatingNewChanged",change:{isCreatingNewService:!0}}),r({dispatchType:"unsavedChangesToServices",change:{item:u}})},e[9]=r,e[10]=m):m=e[10];const v=m;if(!t.services||t.isLoading){let t,r;return e[11]===Symbol.for("react.memo_cache_sentinel")?(t=a().createElement("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e[11]=t):t=e[11],e[12]===Symbol.for("react.memo_cache_sentinel")?(r=a().createElement("div",{className:"flex items-center justify-center p-8"},t,a().createElement("span",{className:"ml-2"},(0,j.__)("Loading services","simplybook"),"...")),e[12]=r):r=e[12],r}let p;e[13]!==t.isLoading||e[14]!==t.services?(p=!t.isLoading&&t.services&&0===t.services.length?a().createElement("div",{className:"text-center py-8 text-gray-500"},(0,j.__)('No services found. Click "Add Service" to create your first service.',"simplybook")):a().createElement("div",{className:"space-y-6"},t.services?.filter(xe).map((e=>a().createElement(be,{key:e.id,service:e,services:t.services})))),e[13]=t.isLoading,e[14]=t.services,e[15]=p):p=e[15];const f=t.isCreatingNewProvider?c:v;let g,h,y,b,x;return e[16]===Symbol.for("react.memo_cache_sentinel")?(g=a().createElement(le.g,{icon:ce.QLR,className:"w-4 h-4 mr-2 text-white font-bold"}),e[16]=g):g=e[16],e[17]!==t.isCreatingNewProvider?(h=t.isCreatingNewProvider?(0,j.__)("Cancel New Service","simplybook"):(0,j.__)("Add Service","simplybook"),e[17]=t.isCreatingNewProvider,e[18]=h):h=e[18],e[19]!==t.isSaving||e[20]!==f||e[21]!==h?(y=a().createElement("div",{className:"flex justify-between items-center mb-4"},a().createElement("div",{className:"flex items-center gap-3"},a().createElement(pe.A,{type:"button",className:"font-bold !border-secondary bg-secondary text-white",onClick:f,disabled:t.isSaving,btnVariant:"square"},g,h))),e[19]=t.isSaving,e[20]=f,e[21]=h,e[22]=y):y=e[22],e[23]!==t.isCreatingNewService?(b=t.isCreatingNewService&&a().createElement("div",{className:"mb-6 p-4 border border-gray-200 rounded-lg bg-gray-50"},a().createElement("h4",{className:"text-md font-medium mb-4"},(0,j.__)("Add New Service","simplybook")),a().createElement(ye,{serviceId:"new",service:u})),e[23]=t.isCreatingNewService,e[24]=b):b=e[24],e[25]!==y||e[26]!==b||e[27]!==p?(x=a().createElement("div",{className:"w-full"},p,y,b),e[25]=y,e[26]=b,e[27]=p,e[28]=x):x=e[28],x}},Ee=(0,i.memo)((({setting:e,control:t,setValue:r,getValues:n,reset:a,...s})=>{if(!1===e.visible)return React.createElement("input",{type:"hidden",defaultValue:e.value||e.default});const l=we[e.type],{saveSettings:c,setValue:d,getValue:u,settings:m}=(0,P.A)();if(!l)return React.createElement("div",{className:"w-full"},"Unknown field type:",e.type,", id:",e.id);const v={...e.required&&{validate:{required:e=>!!e||(0,j.__)("This field is required","simplybook")}},...e.validation?.regex&&{pattern:{value:new RegExp(e.validation.regex),message:e.validation.message||(0,j.__)("Invalid format","simplybook")}},...e.min&&{min:e.min},...e.max&&{max:e.max},...e.minLength&&{minLength:e.minLength},...e.maxLength&&{maxLength:e.maxLength},...e.validate&&{validate:e.validate}};let p=e.value||e.default;return"checkbox"===e.type&&(p="1"===p||!0===p||1===p),"self"===e?.control?React.createElement(S.A,null,React.createElement(l,_e({className:e.inline_group?"inline-flex":"",setting:e,required:e.required,label:e.label,disabled:s.settingsIsUpdating||e.disabled,context:e.context,help:e.help,options:e.options,control:t,setValue:r,getValues:n,reset:a},s,we[e.type]))):React.createElement(S.A,null,React.createElement(o.xI,{name:e.id,control:t,rules:v,defaultValue:p,render:({field:t,fieldState:r})=>((0,i.useEffect)((()=>{u(e.id)!==t.value&&e.save_on_change&&t.value.length>0&&(console.log("saving field on change",e.id,t.value),(async t=>{d(e.id,t),e.mapping&&e.mapping.forEach((e=>{d(e,t)}))})(t.value))}),[t.value]),React.createElement(l,_e({},s,{className:s.className,setting:e,fieldState:r,required:e.required,label:e.label,copyField:e.copy_field,disabled:s.settingsIsUpdating||e.disabled,context:e.context,tooltip:e.tooltip,help:e.help,options:e.options},t)))}))}));Ee.displayName="FormField";const ke=Ee,Ne=e=>{const t=(0,n.c)(13),{fields:r,control:i,getValues:o,setValue:s,reset:l}=e;let c,d;if(t[0]!==i||t[1]!==r||t[2]!==o||t[3]!==l||t[4]!==s){let e;t[6]!==i||t[7]!==o||t[8]!==l||t[9]!==s?(e=e=>a().createElement(ke,{className:"inline"==e?.style?"form-field-inline":"w-full",setting:e,key:e.id,control:i,setValue:s,getValues:o,reset:l}),t[6]=i,t[7]=o,t[8]=l,t[9]=s,t[10]=e):e=t[10],c=r.map(e),t[0]=i,t[1]=r,t[2]=o,t[3]=l,t[4]=s,t[5]=c}else c=t[5];return t[11]!==c?(d=a().createElement(a().Fragment,null,c),t[11]=c,t[12]=d):d=t[12],d}},3970:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1728),i=r(4164);const a=e=>{const t=(0,n.c)(5),{className:r,children:a}=e;let o,s;return t[0]!==r?(o=(0,i.A)("left-column flex",r),t[0]=r,t[1]=o):o=t[1],t[2]!==a||t[3]!==o?(s=React.createElement("div",{className:o},a),t[2]=a,t[3]=o,t[4]=s):s=t[4],s};a.displayName="LeftColumn";const o=a},7047:(e,t,r)=>{r.d(t,{A:()=>o});var n=r(1728),i=r(4164);const a=e=>{const t=(0,n.c)(6),{className:r,style:a,children:o}=e;let s,l;return t[0]!==r?(s=(0,i.A)("right-column w-full flex",r),t[0]=r,t[1]=s):s=t[1],t[2]!==o||t[3]!==a||t[4]!==s?(l=React.createElement("div",{className:s,style:a},o),t[2]=o,t[3]=a,t[4]=s,t[5]=l):l=t[5],l};a.displayName="RightColumn";const o=a},7983:(e,t,r)=>{r.d(t,{A:()=>f});var n=r(1728),i=r(2166),a=r(9785),o=r(8846),s=r(332),l=r(7723),c=r(1730),d=r(6475),u=r(1609),m=r(296),v=r(4576);const p=e=>{const t=(0,n.c)(26),{path:r,rightColumn:p,bottomText:f,primaryButton:g,secondaryButton:h,customHtml:y,syncFieldConfig:b}=e;let x;t[0]!==g?(x=void 0===g?{label:(0,l.__)("Next","simplybook")}:g,t[0]=g,t[1]=x):x=t[1];const _=x,w=void 0===h?null:h,E=void 0===y?null:y,{getURLForStep:k,getCurrentStepId:N,getCurrentStep:S,updateData:j,data:C,defaultData:A,isLastStep:P,recaptchaToken:O,apiError:T,setApiError:R,onboardingCompleted:q,setOnboardingCompleted:F}=(0,o.A)(),L=(0,i.Z)();let I;t[2]!==C||t[3]!==A?(I={defaultValues:A,values:C,mode:"onTouched"},t[2]=C,t[3]=A,t[4]=I):I=t[4];const{handleSubmit:V,control:U,setValue:D,getValues:H,formState:B}=(0,a.mN)(I),{isValid:M,isValidating:$,touchedFields:K}=B,{getValue:Q}=(0,c.A)(),[,z]=(0,u.useState)(""),W=S(r);N(r);const[G,J]=(0,u.useState)(!M);let X;t[5]===Symbol.for("react.memo_cache_sentinel")?(X=new v.A,t[5]=X):X=t[5];const Y=X;let Z,ee;t[6]!==M?(Z=()=>{J(!M)},ee=[M],t[6]=M,t[7]=Z,t[8]=ee):(Z=t[7],ee=t[8]),(0,u.useEffect)(Z,ee),b&&((e,t,r)=>{const n=H(e);K[e]?r(n):void 0!==t&&D(e,t,{shouldValidate:!0,shouldTouch:!0})})(b.key,b.value,b.setValue);const te=async(e,t)=>{const n=void 0===t?"primary":t;R(null),J(!0);let i={...e};if(i.recaptchaToken=O,"primary"===n&&_.modifyData?i=_.modifyData(i):"secondary"===n&&w.modifyData&&(i=w.modifyData(i)),W.beforeSubmit)try{if(!1===await W.beforeSubmit(i))return void J(!1)}catch(e){const t=e;return J(!1),void console.error("Submission cancelled:",t)}await j(i),J(!1),"primary"===n&&_.navigateTo?L({to:_.navigateTo}):"secondary"===n&&w.navigateTo?L({to:w.navigateTo}):P(r)?L({to:"/"}):S(r).id<=3&&q?L({to:k(4)}):L({to:k(N(r)+1)})};let re,ne,ie,ae;t[9]!==Q?(re=()=>{const e=Q("company_name");e&&e.length>0&&z(e)},ne=Q("company_name"),t[9]=Q,t[10]=re,t[11]=ne):(re=t[10],ne=t[11]),t[12]!==ne?(ie=[ne],t[12]=ne,t[13]=ie):ie=t[13],(0,u.useEffect)(re,ie),t[14]!==k||t[15]!==L||t[16]!==R||t[17]!==F?(ae=async()=>{try{await Y.setRoute("onboarding/retry_onboarding").setPayload({user_confirmed:!0}).post()}catch(e){return R(e.message||(0,l.__)("An error occurred while restarting the onboarding.","simplybook")),!1}F(!1),R(""),await L({to:k(1)})},t[14]=k,t[15]=L,t[16]=R,t[17]=F,t[18]=ae):ae=t[18];const oe=ae;let se,le,ce;return t[19]!==_.label?(se=_.label??(0,l.__)("Next","simplybook"),t[19]=_.label,t[20]=se):se=t[20],t[21]!==T||t[22]!==oe?(le=T&&React.createElement(m.A,{errorHeading:(0,l.__)("Something went wrong","simplybook"),error:T,resolve:{callback:oe,label:(0,l.__)("Or restart the onboarding","simplybook")}}),t[21]=T,t[22]=oe,t[23]=le):le=t[23],t[24]!==p?(ce=React.createElement("div",{className:"col-span-4 col-start-7 row-span-2 my-12"},p),t[24]=p,t[25]=ce):ce=t[25],React.createElement(React.Fragment,null,React.createElement("div",{className:`w-full col-span-4 col-start-3 ${W.fields?.length?"my-12":""} flex flex-col text-black`},React.createElement("div",{className:"flex flex-col"},React.createElement("form",{className:"flex flex-wrap justify-between"},React.createElement(d.A,{fields:W.fields,control:U}),E,React.createElement(s.A,{className:"w-full mt-4",showLoader:$,btnVariant:"secondary",label:se,context:f,button:{disabled:_.disabled??G,onClick:V((e=>te(e,"primary")))}}),w&&React.createElement(s.A,{btnVariant:"tertiary",label:w.label,button:{disabled:G,onClick:V((e=>te(e,"secondary")))}}))),le),ce)};p.displayName="OnboardingStep";const f=p},8846:(e,t,r)=>{r.d(t,{A:()=>u});var n=r(1728),i=r(1609),a=r(7723),o=r(7665),s=r(9270),l=r(7097),c=r(1730),d=r(4576);const u=()=>{const e=(0,n.c)(14),{getValue:t}=(0,c.A)(),[r,u]=(0,i.useState)(""),v=(0,o.jE)(),{settings:p}=(0,c.A)(),f=new d.A;let g={NL:"Netherlands",DE:"Germany",AT:"Austria",BE:"Belgium"};simplybook?.simplybook_countries&&(g=Object.entries(simplybook.simplybook_countries).reduce(m,{}));const h=[{id:1,path:"/onboarding/create-your-account",fields:[{id:"email",type:"text",label:(0,a.__)("Email address","simplybook"),required:!0,validation:{regex:"^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$",message:(0,a.__)("Please enter a valid email address","simplybook")}},{required:!0,id:"terms-and-conditions",type:"checkbox",label:sprintf((0,a.__)("I agree to the %sterms and conditions%s","simplybook"),'<a href="https://simplybook.me/terms-and-conditions" target="_blank">',"</a>")}],beforeSubmit:async e=>{try{await f.setRoute("onboarding/register_email").setPayload(e).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while registering the email.","simplybook")),!1}return u(""),!0}},{id:2,path:"/onboarding/information-check",fields:[{id:"company_name",type:"text",label:"Company name",required:!0},{id:"category",type:"select",style:"inline",required:!0,inline_group:!0,label:(0,a.__)("Business category","simplybook"),options:[{value:"3",label:(0,a.__)("Beauty and wellness","simplybook")},{value:"43",label:(0,a.__)("Sport and fitness","simplybook")},{value:"5",label:(0,a.__)("Personal meetings and services","simplybook")},{value:"1",label:(0,a.__)("Medical","simplybook")},{value:"4",label:(0,a.__)("Events and entertainment","simplybook")},{value:"6",label:(0,a.__)("Education","simplybook")},{value:"75",label:(0,a.__)("Retailers","simplybook")},{value:"7",label:(0,a.__)("Officials","simplybook")},{value:"8",label:(0,a.__)("Other category","simplybook")}]},{id:"service",type:"text",style:"inline",label:(0,a.__)("What service do you provide?","simplybook"),required:!0},{id:"phone",type:"text",style:"inline",label:(0,a.__)("Phone","simplybook"),validation:{regex:["^[0-9\\s().\\-+]+$"],message:(0,a.__)("Please enter a valid phone number","simplybook")},required:!0},{id:"address",type:"text",style:"inline",label:(0,a.__)("Address","simplybook"),required:!0},{id:"zip",type:"text",style:"inline",label:(0,a.__)("Postal Code","simplybook"),required:!0},{id:"city",type:"text",style:"inline",label:(0,a.__)("City","simplybook"),required:!0},{id:"country",type:"select",label:(0,a.__)("Country","simplybook"),options:g,required:!0}],beforeSubmit:async e=>{try{await f.setRoute("onboarding/company_registration").setPayload(e).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while registering your company. Please try again.","simplybook")),!1}return u(""),!0}},{id:3,path:"/onboarding/confirm-email",fields:[{id:"confirmation-code",type:"text",label:(0,a.__)("Confirmation Code","simplybook"),required:!0}],beforeSubmit:async e=>{try{await f.setRoute("onboarding/confirm_email").setPayload(e).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while confirming your email. Please try again.","simplybook")),!1}return u(""),!0}},{id:4,path:"/onboarding/style-widget",beforeSubmit:async e=>{try{await f.setRoute("onboarding/save_widget_style").setPayload({primary_color:e.primary_color,secondary_color:e.secondary_color,active_color:e.active_color}).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while saving the styles.","simplybook")),!1}return u(""),!0},fields:[]},{id:5,path:"/onboarding/implementation",fields:[{id:"implementation",type:"implementation",label:"",default:"generated",save_on_change:!0,options:[{value:"generated",label:(0,a.__)("Simple","simplybook"),description:(0,a.__)("Generate page","simplybook")},{value:"manual",label:(0,a.__)("Shortcode","simplybook"),description:(0,a.__)("Do it yourself","simplybook")}]}],beforeSubmit:async e=>"manual"===t("implementation")?(async e=>{try{await f.setRoute("onboarding/finish_onboarding").setPayload(e).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while finishing the onboarding.","simplybook")),!1}return S(!0),u(""),!0})(e):(async e=>{if(!e?.calendarPageUrl)return u((0,a.__)("Please enter a valid calendar page URL","simplybook")),!1;if(!e?.calendarPageAvailable)return u((0,a.__)("This calendar page URL is taken. Please choose another one.","simplybook")),!1;const t={calendarPageUrl:e.calendarPageUrl};try{await f.setRoute("onboarding/generate_pages").setPayload(t).post()}catch(e){return u(e.message||(0,a.__)("An error occurred while generating pages.","simplybook")),!1}return S(!0),u(""),!0})(e)}],y={};h.forEach((e=>{e.fields.forEach((e=>{y[e.id]=""}))}));const b={};let x;p?.forEach((e=>{e.id in y&&(b[e.id]=e.value)})),e[0]===Symbol.for("react.memo_cache_sentinel")?(x=["onboarding_data"],e[0]=x):x=e[0];const _=(0,s.I)({queryKey:x,initialData:{...y,...b,onboardingCompleted:simplybook.is_onboarding_completed},staleTime:3e5});let w;e[1]!==v?(w={mutationFn:async e=>{v.setQueryData(["onboarding_data"],(t=>({...t,...e}))),v.invalidateQueries(["onboarding_data"])}},e[1]=v,e[2]=w):w=e[2];const{mutate:E}=(0,l.n)(w);let k;e[3]!==v?(k={mutationFn:async e=>{v.setQueryData(["onboarding_data"],(t=>({...t,onboardingCompleted:e})))},onSuccess:()=>{v.invalidateQueries(["onboarding_data"])}},e[3]=v,e[4]=k):k=e[4];const{mutate:N}=(0,l.n)(k),S=N;let j,C,A,P,O;return e[5]===Symbol.for("react.memo_cache_sentinel")?(j=()=>{u("")},e[5]=j):j=e[5],e[6]!==t?(C=t("implementation"),e[6]=t,e[7]=C):C=e[7],e[8]!==C?(A=[C],e[8]=C,e[9]=A):A=e[9],(0,i.useEffect)(j,A),e[10]!==E?(P=e=>E({recaptchaToken:e}),e[10]=E,e[11]=P):P=e[11],e[12]!==S?(O=e=>S(e),e[12]=S,e[13]=O):O=e[13],{steps:h,data:_.data,defaultData:y,updateData:E,getCurrentStepId:e=>h.find((t=>t.path===e))?.id,getCurrentStep:e=>h.find((t=>t.path===e)),getURLForStep:e=>h[e-1]?.path,isLastStep:e=>h.length===h.find((t=>t.path===e))?.id,recaptchaToken:_.data?.recaptchaToken||"",setRecaptchaToken:P,onboardingCompleted:_.data?.onboardingCompleted||!1,setOnboardingCompleted:O,apiError:r,setApiError:u}};function m(e,t){const[r,n]=t;return e[r]=n,e}},1730:(e,t,r)=>{r.d(t,{A:()=>l});var n=r(1728),i=r(7665),a=r(9270),o=r(7097),s=r(4576);const l=()=>{const e=(0,n.c)(21),t=(0,i.jE)();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new s.A,e[0]=r):r=e[0];const l=r;let d,u,m;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=["setting_fields"],u=()=>l.setRoute("settings/get").setPayload({withValues:!0}).post(),e[1]=d,e[2]=u):(d=e[1],u=e[2]),e[3]===Symbol.for("react.memo_cache_sentinel")?(m={queryKey:d,queryFn:u,staleTime:3e5,initialData:{data:window.simplybook?.settings_fields},retry:0,select:c},e[3]=m):m=e[3];const v=(0,a.I)(m);let p,f;e[4]===Symbol.for("react.memo_cache_sentinel")?(p=async e=>await l.setRoute("settings/save").setPayload(e).post(),e[4]=p):p=e[4],e[5]!==t?(f={mutationFn:p,onSuccess:e=>{if("success"!==e?.status)throw e;t.setQueryData(["setting_fields"],(t=>e?.data?[...e?.data]:[])),t.invalidateQueries({queryKey:["setting_fields"]})}},e[5]=t,e[6]=f):f=e[6];const{mutateAsync:g}=(0,o.n)(f);let h;e[7]!==v?.data?(h=e=>v?.data.find((t=>t.id===e))?.value,e[7]=v?.data,e[8]=h):h=e[8];const y=h;let b;e[9]!==v?.data||e[10]!==g?(b=(e,t)=>{const r=v?.data?.map((r=>r.id===e?{...r,value:t}:r));r&&g(r)},e[9]=v?.data,e[10]=g,e[11]=b):b=e[11];const x=b,_=v?.data,w=v?.isLoading;let E,k;return e[12]!==t?(E=()=>t.invalidateQueries({queryKey:["setting_fields"]}),e[12]=t,e[13]=E):E=e[13],e[14]!==y||e[15]!==g||e[16]!==x||e[17]!==E||e[18]!==_||e[19]!==w?(k={settings:_,saveSettings:g,getValue:y,setValue:x,isSavingSettings:w,invalidateSettings:E},e[14]=y,e[15]=g,e[16]=x,e[17]=E,e[18]=_,e[19]=w,e[20]=k):k=e[20],k};function c(e){return e?.data??e}},3775:(e,t,r)=>{r.d(t,{A:()=>s});var n=r(1728),i=r(7665),a=r(9270),o=r(4576);const s=()=>{const e=(0,n.c)(9),t=(0,i.jE)();let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=new o.A,e[0]=r):r=e[0];const s=r;let l;e[1]===Symbol.for("react.memo_cache_sentinel")?(l={queryKey:["get_widget"],queryFn:()=>s.setRoute("get_widget").get(),staleTime:3e5,retry:0,enabled:!1},e[1]=l):l=e[1];const{data:c,refetch:d}=(0,a.I)(l);let u;e[2]!==t||e[3]!==d?(u=async()=>{t.invalidateQueries({queryKey:["get_widget"]}).then((function(e){return d()}))},e[2]=t,e[3]=d,e[4]=u):u=e[4];const m=u;let v;e[5]===Symbol.for("react.memo_cache_sentinel")?(v=async e=>await s.setRoute("get_preview_widget").setPayload(e).post(),e[5]=v):v=e[5];const p=v,f=c?.data?.widget;let g;return e[6]!==m||e[7]!==f?(g={widgetScript:f,invalidateAndRefetchWidgetScript:m,createPreviewWidget:p},e[6]=m,e[7]=f,e[8]=g):g=e[8],g}},2167:(e,t,r)=>{r.r(t),r.d(t,{Route:()=>h});var n=r(6037),i=r(7723),a=r(4705),o=r(3970),s=r(7047),l=r(1609),c=r(7581),d=r(8846),u=r(1728),m=r(9270),v=r(4576);var p=r(7983),f=r(1577);const g="/onboarding/style-widget",h=(0,n.uV)(g)({component:()=>{const{colors:e,isLoading:t}=(()=>{const e=(0,u.c)(9);let t;e[0]===Symbol.for("react.memo_cache_sentinel")?(t=new v.A,e[0]=t):t=e[0];const r=t;let n;e[1]===Symbol.for("react.memo_cache_sentinel")?(n={queryKey:["theme_colors"],queryFn:()=>r.setRoute("theme_colors").get(),refetchOnMount:"always"},e[1]=n):n=e[1];const{data:i,isLoading:a,error:o}=(0,m.I)(n);let s,l;return e[2]!==a||e[3]!==i?.data?.colors?(s=a?null:i?.data?.colors||simplybook.fallback_colors,e[2]=a,e[3]=i?.data?.colors,e[4]=s):s=e[4],e[5]!==o||e[6]!==a||e[7]!==s?(l={colors:s,isLoading:a,error:o},e[5]=o,e[6]=a,e[7]=s,e[8]=l):l=e[8],l})(),{onboardingCompleted:r}=(0,d.A)(),[n,h]=(0,l.useState)(null),[y,b]=(0,l.useState)(null),[x,_]=(0,l.useState)(null);(0,l.useEffect)((()=>{e&&(h(e.primary),b(e.secondary),_(e.active))}),[e]);const w=!t&&e;return React.createElement(React.Fragment,null,React.createElement(o.A,{className:"items-center flex-col flex-wrap justify-start xl:col-span-5 col-span-12 xl:col-start-2 mt-26"},React.createElement("div",{className:"text-center"},React.createElement("h2",{className:"mt-2 text-lg font-light text-black"},(0,i.__)("Select your company colors","simplybook")),React.createElement("h1",{className:"text-4xl font-semibold text-black mb-4"},(0,i.__)("Next Step: Finish","simplybook"))),React.createElement("div",{className:"flex flex-wrap justify-center mt-12 mb-12"},w?React.createElement(React.Fragment,null,React.createElement(c.A,{className:"mr-4",label:(0,i.__)("Primary","simplybook"),setting:{value:n,default:e.primary,disabled:!1},setColorOnClose:e=>{h(e)}}),React.createElement(c.A,{className:"mr-4",label:(0,i.__)("Secondary","simplybook"),setting:{value:y,default:e.secondary,disabled:!1},setColorOnClose:e=>{b(e)}}),React.createElement(c.A,{label:(0,i.__)("Active","simplybook"),setting:{value:x,default:e.active,disabled:!1},setColorOnClose:e=>{_(e)}})):React.createElement("div",{className:"flex items-center justify-center py-8"},React.createElement(f.A,{name:"spinner",className:"animate-spin mr-2"}),React.createElement("span",null,(0,i.__)("Loading theme colors...","simplybook")))),React.createElement(p.A,{path:g,primaryButton:{disabled:!r,label:(0,i.__)("Next step","simplybook"),modifyData:e=>(e.primary_color=n,e.secondary_color=y,e.active_color=x,e)}})),React.createElement(s.A,{className:"items-center flex-col flex-wrap justify-center xl:col-span-5 col-span-12 relative w-full"},React.createElement(a.A,{primary:n,secondary:y,active:x,onboardingCompleted:r})))}})}}]);